/*-- Last Change Revision: $Rev: 2027913 $*/
/*-- Last Change by: $Author: mario.fernandes $*/
/*-- Date of last change: $Date: 2022-08-02 18:43:40 +0100 (ter, 02 ago 2022) $*/
CREATE OR REPLACE PACKAGE BODY ts_adm_request_hist
/*
| Generated by or retrieved - DO NOT MODIFY!
| Created On: 2019-04-22 15:07:21
| Created By: ALERT
*/
 IS

    e_null_column_value EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_null_column_value, -1400);

    e_existing_fky_reference EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_existing_fky_reference, -2266);

    e_check_constraint_failure EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_check_constraint_failure, -2290);

    e_no_parent_key EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_no_parent_key, -2291);

    e_child_record_found EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_child_record_found, -2292);

    e_forall_error EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_forall_error, -24381);

    -- Defined for backward compatibilty.
    e_integ_constraint_failure EXCEPTION;
    PRAGMA EXCEPTION_INIT(e_integ_constraint_failure, -2291);

    FUNCTION next_key(sequence_in IN VARCHAR2 := NULL) RETURN adm_request_hist.id_adm_request_hist%TYPE IS
        retval adm_request_hist.id_adm_request_hist%TYPE;
    BEGIN
        IF sequence_in IS NULL
        THEN
            retval := seq_adm_request_hist.nextval;
        ELSE
            EXECUTE IMMEDIATE 'SELECT ' || sequence_in || '.NEXTVAL FROM dual'
                INTO retval;
        END IF;
        RETURN retval;
    END next_key;

    -- Insert one row, generating hidden primary key using a sequence
    PROCEDURE ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) IS
        l_pky adm_request_hist.id_adm_request_hist%TYPE := next_key;
    BEGIN
        ins(id_adm_request_hist_in  => l_pky,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END ins;

    -- Insert one row, generating hidden primary key using a sequence
    PROCEDURE ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        ins(id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END ins;

    -- Insert one row, returning primary key generated by sequence
    PROCEDURE ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        id_adm_request_hist_out IN OUT adm_request_hist.id_adm_request_hist%TYPE,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) IS
        l_pky adm_request_hist.id_adm_request_hist%TYPE := next_key;
    BEGIN
        ins(id_adm_request_hist_in  => l_pky,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
        id_adm_request_hist_out := l_pky;
    END ins;

    -- Insert one row, returning primary key generated by sequence
    PROCEDURE ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        id_adm_request_hist_out IN OUT adm_request_hist.id_adm_request_hist%TYPE,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        ins(id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            id_adm_request_hist_out => id_adm_request_hist_out,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END ins;

    -- Insert one row with function, return generated primary key
    FUNCTION ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) RETURN adm_request_hist.id_adm_request_hist%TYPE IS
        l_pky adm_request_hist.id_adm_request_hist%TYPE := next_key;
    BEGIN
        ins(id_adm_request_hist_in  => l_pky,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
        RETURN l_pky;
    END ins;

    -- Insert one row with function, return generated primary key
    FUNCTION ins
    (
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        -- Pass false if you want errors to propagate out unhandled
        handle_error_in IN BOOLEAN := TRUE
    ) RETURN adm_request_hist.id_adm_request_hist%TYPE IS
        l_pky    adm_request_hist.id_adm_request_hist%TYPE := next_key;
        rows_out table_varchar;
    BEGIN
        ins(id_adm_request_hist_in  => l_pky,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
        RETURN l_pky;
    END ins;

    PROCEDURE ins
    (
        id_adm_request_hist_in  IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        handle_error_in         IN BOOLEAN := TRUE,
        rows_out                OUT table_varchar
    ) IS
    BEGIN
        INSERT INTO adm_request_hist
            (id_adm_request_hist,
             id_adm_request,
             id_adm_indication,
             id_dest_episode,
             id_dest_prof,
             id_dest_inst,
             id_department,
             id_dep_clin_serv,
             id_room_type,
             id_pref_room,
             id_admission_type,
             expected_duration,
             id_adm_preparation,
             flg_mixed_nursing,
             id_bed_type,
             dt_admission,
             flg_nit,
             dt_nit_suggested,
             id_nit_dcs,
             id_nit_req,
             notes,
             flg_status,
             id_upd_episode,
             id_upd_prof,
             dt_upd,
             id_upd_inst,
             create_user,
             create_time,
             create_institution,
             update_user,
             update_time,
             update_institution,
             flg_regim,
             flg_benefi,
             flg_precauc,
             flg_contact,
             flg_compulsory,
             id_compulsory_reason,
             compulsory_reason)
        VALUES
            (id_adm_request_hist_in,
             id_adm_request_in,
             id_adm_indication_in,
             id_dest_episode_in,
             id_dest_prof_in,
             id_dest_inst_in,
             id_department_in,
             id_dep_clin_serv_in,
             id_room_type_in,
             id_pref_room_in,
             id_admission_type_in,
             expected_duration_in,
             id_adm_preparation_in,
             flg_mixed_nursing_in,
             id_bed_type_in,
             dt_admission_in,
             flg_nit_in,
             dt_nit_suggested_in,
             id_nit_dcs_in,
             id_nit_req_in,
             notes_in,
             flg_status_in,
             id_upd_episode_in,
             id_upd_prof_in,
             dt_upd_in,
             id_upd_inst_in,
             create_user_in,
             create_time_in,
             create_institution_in,
             update_user_in,
             update_time_in,
             update_institution_in,
             flg_regim_in,
             flg_benefi_in,
             flg_precauc_in,
             flg_contact_in,
             flg_compulsory_in,
             id_compulsory_reason_in,
             compulsory_reason_in)
        RETURNING ROWID BULK COLLECT INTO rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END ins;

    PROCEDURE ins
    (
        id_adm_request_hist_in  IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        handle_error_in         IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        ins(id_adm_request_hist_in  => id_adm_request_hist_in,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END ins;

    PROCEDURE ins
    (
        rec_in          IN adm_request_hist%ROWTYPE,
        gen_pky_in      IN BOOLEAN DEFAULT FALSE,
        sequence_in     IN VARCHAR2 := NULL,
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) IS
        l_rec adm_request_hist%ROWTYPE := rec_in;
    BEGIN
        IF gen_pky_in
        THEN
            l_rec.id_adm_request_hist := next_key(sequence_in);
        END IF;
    
        ins(id_adm_request_hist_in  => l_rec.id_adm_request_hist,
            id_adm_request_in       => l_rec.id_adm_request,
            id_adm_indication_in    => l_rec.id_adm_indication,
            id_dest_episode_in      => l_rec.id_dest_episode,
            id_dest_prof_in         => l_rec.id_dest_prof,
            id_dest_inst_in         => l_rec.id_dest_inst,
            id_department_in        => l_rec.id_department,
            id_dep_clin_serv_in     => l_rec.id_dep_clin_serv,
            id_room_type_in         => l_rec.id_room_type,
            id_pref_room_in         => l_rec.id_pref_room,
            id_admission_type_in    => l_rec.id_admission_type,
            expected_duration_in    => l_rec.expected_duration,
            id_adm_preparation_in   => l_rec.id_adm_preparation,
            flg_mixed_nursing_in    => l_rec.flg_mixed_nursing,
            id_bed_type_in          => l_rec.id_bed_type,
            dt_admission_in         => l_rec.dt_admission,
            flg_nit_in              => l_rec.flg_nit,
            dt_nit_suggested_in     => l_rec.dt_nit_suggested,
            id_nit_dcs_in           => l_rec.id_nit_dcs,
            id_nit_req_in           => l_rec.id_nit_req,
            notes_in                => l_rec.notes,
            flg_status_in           => l_rec.flg_status,
            id_upd_episode_in       => l_rec.id_upd_episode,
            id_upd_prof_in          => l_rec.id_upd_prof,
            dt_upd_in               => l_rec.dt_upd,
            id_upd_inst_in          => l_rec.id_upd_inst,
            create_user_in          => l_rec.create_user,
            create_time_in          => l_rec.create_time,
            create_institution_in   => l_rec.create_institution,
            update_user_in          => l_rec.update_user,
            update_time_in          => l_rec.update_time,
            update_institution_in   => l_rec.update_institution,
            flg_regim_in            => l_rec.flg_regim,
            flg_benefi_in           => l_rec.flg_benefi,
            flg_precauc_in          => l_rec.flg_precauc,
            flg_contact_in          => l_rec.flg_contact,
            flg_compulsory_in       => l_rec.flg_compulsory,
            id_compulsory_reason_in => l_rec.id_compulsory_reason,
            compulsory_reason_in    => l_rec.compulsory_reason,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END ins;

    PROCEDURE ins
    (
        rec_in          IN adm_request_hist%ROWTYPE,
        gen_pky_in      IN BOOLEAN DEFAULT FALSE,
        sequence_in     IN VARCHAR2 := NULL,
        handle_error_in IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        ins(rec_in          => rec_in,
            gen_pky_in      => gen_pky_in,
            sequence_in     => sequence_in,
            handle_error_in => handle_error_in,
            rows_out        => rows_out);
    END ins;

    -- Insert a collection of rows using FORALL; all primary key values
    -- must have already been generated, or are handled in triggers
    PROCEDURE ins
    (
        rows_in         IN adm_request_hist_tc,
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) IS
    BEGIN
        IF rows_in.count = 0
        THEN
            NULL;
        ELSE
            FORALL indx IN rows_in.first .. rows_in.last SAVE EXCEPTIONS
                INSERT INTO adm_request_hist
                    (id_adm_request_hist,
                     id_adm_request,
                     id_adm_indication,
                     id_dest_episode,
                     id_dest_prof,
                     id_dest_inst,
                     id_department,
                     id_dep_clin_serv,
                     id_room_type,
                     id_pref_room,
                     id_admission_type,
                     expected_duration,
                     id_adm_preparation,
                     flg_mixed_nursing,
                     id_bed_type,
                     dt_admission,
                     flg_nit,
                     dt_nit_suggested,
                     id_nit_dcs,
                     id_nit_req,
                     notes,
                     flg_status,
                     id_upd_episode,
                     id_upd_prof,
                     dt_upd,
                     id_upd_inst,
                     flg_regim,
                     flg_benefi,
                     flg_precauc,
                     flg_contact,
                     flg_compulsory,
                     id_compulsory_reason,
                     compulsory_reason)
                VALUES
                    (rows_in(indx).id_adm_request_hist,
                     rows_in(indx).id_adm_request,
                     rows_in(indx).id_adm_indication,
                     rows_in(indx).id_dest_episode,
                     rows_in(indx).id_dest_prof,
                     rows_in(indx).id_dest_inst,
                     rows_in(indx).id_department,
                     rows_in(indx).id_dep_clin_serv,
                     rows_in(indx).id_room_type,
                     rows_in(indx).id_pref_room,
                     rows_in(indx).id_admission_type,
                     rows_in(indx).expected_duration,
                     rows_in(indx).id_adm_preparation,
                     rows_in(indx).flg_mixed_nursing,
                     rows_in(indx).id_bed_type,
                     rows_in(indx).dt_admission,
                     rows_in(indx).flg_nit,
                     rows_in(indx).dt_nit_suggested,
                     rows_in(indx).id_nit_dcs,
                     rows_in(indx).id_nit_req,
                     rows_in(indx).notes,
                     rows_in(indx).flg_status,
                     rows_in(indx).id_upd_episode,
                     rows_in(indx).id_upd_prof,
                     rows_in(indx).dt_upd,
                     rows_in(indx).id_upd_inst,
                     rows_in(indx).flg_regim,
                     rows_in(indx).flg_benefi,
                     rows_in(indx).flg_precauc,
                     rows_in(indx).flg_contact,
                     rows_in(indx).flg_compulsory,
                     rows_in(indx).id_compulsory_reason,
                     rows_in(indx).compulsory_reason)
                RETURNING ROWID BULK COLLECT INTO rows_out;
        END IF;
    
    EXCEPTION
        WHEN e_forall_error THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                FOR indx IN 1 .. SQL%bulk_exceptions.count
                LOOP
                    pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
                END LOOP;
            END IF;
        WHEN OTHERS THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END ins;

    -- Insert a collection of rows using FORALL; all primary key values
    -- must have already been generated, or are handled in triggers
    PROCEDURE ins
    (
        rows_in         IN adm_request_hist_tc,
        handle_error_in IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        ins(rows_in => rows_in, handle_error_in => handle_error_in, rows_out => rows_out);
    END ins;

    -- Update any/all columns by primary key. If you pass NULL, then
    -- the current column value is set to itself. If you need a more
    -- selected UPDATE then use one of the onecol procedures below.
    PROCEDURE upd
    (
        id_adm_request_hist_in   IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in        IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_request_nin       IN BOOLEAN := TRUE,
        id_adm_indication_in     IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_adm_indication_nin    IN BOOLEAN := TRUE,
        id_dest_episode_in       IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_episode_nin      IN BOOLEAN := TRUE,
        id_dest_prof_in          IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_prof_nin         IN BOOLEAN := TRUE,
        id_dest_inst_in          IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_dest_inst_nin         IN BOOLEAN := TRUE,
        id_department_in         IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_department_nin        IN BOOLEAN := TRUE,
        id_dep_clin_serv_in      IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_dep_clin_serv_nin     IN BOOLEAN := TRUE,
        id_room_type_in          IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_room_type_nin         IN BOOLEAN := TRUE,
        id_pref_room_in          IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_pref_room_nin         IN BOOLEAN := TRUE,
        id_admission_type_in     IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        id_admission_type_nin    IN BOOLEAN := TRUE,
        expected_duration_in     IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        expected_duration_nin    IN BOOLEAN := TRUE,
        id_adm_preparation_in    IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        id_adm_preparation_nin   IN BOOLEAN := TRUE,
        flg_mixed_nursing_in     IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        flg_mixed_nursing_nin    IN BOOLEAN := TRUE,
        id_bed_type_in           IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        id_bed_type_nin          IN BOOLEAN := TRUE,
        dt_admission_in          IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        dt_admission_nin         IN BOOLEAN := TRUE,
        flg_nit_in               IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        flg_nit_nin              IN BOOLEAN := TRUE,
        dt_nit_suggested_in      IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        dt_nit_suggested_nin     IN BOOLEAN := TRUE,
        id_nit_dcs_in            IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_dcs_nin           IN BOOLEAN := TRUE,
        id_nit_req_in            IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        id_nit_req_nin           IN BOOLEAN := TRUE,
        notes_in                 IN adm_request_hist.notes%TYPE DEFAULT NULL,
        notes_nin                IN BOOLEAN := TRUE,
        flg_status_in            IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        flg_status_nin           IN BOOLEAN := TRUE,
        id_upd_episode_in        IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_episode_nin       IN BOOLEAN := TRUE,
        id_upd_prof_in           IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        id_upd_prof_nin          IN BOOLEAN := TRUE,
        dt_upd_in                IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        dt_upd_nin               IN BOOLEAN := TRUE,
        id_upd_inst_in           IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        id_upd_inst_nin          IN BOOLEAN := TRUE,
        create_user_in           IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_user_nin          IN BOOLEAN := TRUE,
        create_time_in           IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_time_nin          IN BOOLEAN := TRUE,
        create_institution_in    IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        create_institution_nin   IN BOOLEAN := TRUE,
        update_user_in           IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_user_nin          IN BOOLEAN := TRUE,
        update_time_in           IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_time_nin          IN BOOLEAN := TRUE,
        update_institution_in    IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        update_institution_nin   IN BOOLEAN := TRUE,
        flg_regim_in             IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_regim_nin            IN BOOLEAN := TRUE,
        flg_benefi_in            IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_benefi_nin           IN BOOLEAN := TRUE,
        flg_precauc_in           IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_precauc_nin          IN BOOLEAN := TRUE,
        flg_contact_in           IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_contact_nin          IN BOOLEAN := TRUE,
        flg_compulsory_in        IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        flg_compulsory_nin       IN BOOLEAN := TRUE,
        id_compulsory_reason_in  IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        id_compulsory_reason_nin IN BOOLEAN := TRUE,
        compulsory_reason_in     IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_nin    IN BOOLEAN := TRUE,
        handle_error_in          IN BOOLEAN := TRUE,
        rows_out                 IN OUT table_varchar
    ) IS
        l_rows_out               table_varchar;
        l_id_adm_request_n       NUMBER(1) := sys.diutil.bool_to_int(id_adm_request_nin);
        l_id_adm_indication_n    NUMBER(1) := sys.diutil.bool_to_int(id_adm_indication_nin);
        l_id_dest_episode_n      NUMBER(1) := sys.diutil.bool_to_int(id_dest_episode_nin);
        l_id_dest_prof_n         NUMBER(1) := sys.diutil.bool_to_int(id_dest_prof_nin);
        l_id_dest_inst_n         NUMBER(1) := sys.diutil.bool_to_int(id_dest_inst_nin);
        l_id_department_n        NUMBER(1) := sys.diutil.bool_to_int(id_department_nin);
        l_id_dep_clin_serv_n     NUMBER(1) := sys.diutil.bool_to_int(id_dep_clin_serv_nin);
        l_id_room_type_n         NUMBER(1) := sys.diutil.bool_to_int(id_room_type_nin);
        l_id_pref_room_n         NUMBER(1) := sys.diutil.bool_to_int(id_pref_room_nin);
        l_id_admission_type_n    NUMBER(1) := sys.diutil.bool_to_int(id_admission_type_nin);
        l_expected_duration_n    NUMBER(1) := sys.diutil.bool_to_int(expected_duration_nin);
        l_id_adm_preparation_n   NUMBER(1) := sys.diutil.bool_to_int(id_adm_preparation_nin);
        l_flg_mixed_nursing_n    NUMBER(1) := sys.diutil.bool_to_int(flg_mixed_nursing_nin);
        l_id_bed_type_n          NUMBER(1) := sys.diutil.bool_to_int(id_bed_type_nin);
        l_dt_admission_n         NUMBER(1) := sys.diutil.bool_to_int(dt_admission_nin);
        l_flg_nit_n              NUMBER(1) := sys.diutil.bool_to_int(flg_nit_nin);
        l_dt_nit_suggested_n     NUMBER(1) := sys.diutil.bool_to_int(dt_nit_suggested_nin);
        l_id_nit_dcs_n           NUMBER(1) := sys.diutil.bool_to_int(id_nit_dcs_nin);
        l_id_nit_req_n           NUMBER(1) := sys.diutil.bool_to_int(id_nit_req_nin);
        l_notes_n                NUMBER(1) := sys.diutil.bool_to_int(notes_nin);
        l_flg_status_n           NUMBER(1) := sys.diutil.bool_to_int(flg_status_nin);
        l_id_upd_episode_n       NUMBER(1) := sys.diutil.bool_to_int(id_upd_episode_nin);
        l_id_upd_prof_n          NUMBER(1) := sys.diutil.bool_to_int(id_upd_prof_nin);
        l_dt_upd_n               NUMBER(1) := sys.diutil.bool_to_int(dt_upd_nin);
        l_id_upd_inst_n          NUMBER(1) := sys.diutil.bool_to_int(id_upd_inst_nin);
        l_create_user_n          NUMBER(1) := sys.diutil.bool_to_int(create_user_nin);
        l_create_time_n          NUMBER(1) := sys.diutil.bool_to_int(create_time_nin);
        l_create_institution_n   NUMBER(1) := sys.diutil.bool_to_int(create_institution_nin);
        l_update_user_n          NUMBER(1) := sys.diutil.bool_to_int(update_user_nin);
        l_update_time_n          NUMBER(1) := sys.diutil.bool_to_int(update_time_nin);
        l_update_institution_n   NUMBER(1) := sys.diutil.bool_to_int(update_institution_nin);
        l_flg_regim_n            NUMBER(1) := sys.diutil.bool_to_int(flg_regim_nin);
        l_flg_benefi_n           NUMBER(1) := sys.diutil.bool_to_int(flg_benefi_nin);
        l_flg_precauc_n          NUMBER(1) := sys.diutil.bool_to_int(flg_precauc_nin);
        l_flg_contact_n          NUMBER(1) := sys.diutil.bool_to_int(flg_contact_nin);
        l_flg_compulsory_n       NUMBER(1) := sys.diutil.bool_to_int(flg_compulsory_nin);
        l_id_compulsory_reason_n NUMBER(1) := sys.diutil.bool_to_int(id_compulsory_reason_nin);
        l_compulsory_reason_n    NUMBER(1) := sys.diutil.bool_to_int(compulsory_reason_nin);
    BEGIN
    
        UPDATE adm_request_hist
           SET id_adm_request       = decode(l_id_adm_request_n,
                                             0,
                                             id_adm_request_in,
                                             nvl(id_adm_request_in, id_adm_request)),
               id_adm_indication    = decode(l_id_adm_indication_n,
                                             0,
                                             id_adm_indication_in,
                                             nvl(id_adm_indication_in, id_adm_indication)),
               id_dest_episode      = decode(l_id_dest_episode_n,
                                             0,
                                             id_dest_episode_in,
                                             nvl(id_dest_episode_in, id_dest_episode)),
               id_dest_prof         = decode(l_id_dest_prof_n, 0, id_dest_prof_in, nvl(id_dest_prof_in, id_dest_prof)),
               id_dest_inst         = decode(l_id_dest_inst_n, 0, id_dest_inst_in, nvl(id_dest_inst_in, id_dest_inst)),
               id_department        = decode(l_id_department_n,
                                             0,
                                             id_department_in,
                                             nvl(id_department_in, id_department)),
               id_dep_clin_serv     = decode(l_id_dep_clin_serv_n,
                                             0,
                                             id_dep_clin_serv_in,
                                             nvl(id_dep_clin_serv_in, id_dep_clin_serv)),
               id_room_type         = decode(l_id_room_type_n, 0, id_room_type_in, nvl(id_room_type_in, id_room_type)),
               id_pref_room         = decode(l_id_pref_room_n, 0, id_pref_room_in, nvl(id_pref_room_in, id_pref_room)),
               id_admission_type    = decode(l_id_admission_type_n,
                                             0,
                                             id_admission_type_in,
                                             nvl(id_admission_type_in, id_admission_type)),
               expected_duration    = decode(l_expected_duration_n,
                                             0,
                                             expected_duration_in,
                                             nvl(expected_duration_in, expected_duration)),
               id_adm_preparation   = decode(l_id_adm_preparation_n,
                                             0,
                                             id_adm_preparation_in,
                                             nvl(id_adm_preparation_in, id_adm_preparation)),
               flg_mixed_nursing    = decode(l_flg_mixed_nursing_n,
                                             0,
                                             flg_mixed_nursing_in,
                                             nvl(flg_mixed_nursing_in, flg_mixed_nursing)),
               id_bed_type          = decode(l_id_bed_type_n, 0, id_bed_type_in, nvl(id_bed_type_in, id_bed_type)),
               dt_admission         = decode(l_dt_admission_n, 0, dt_admission_in, nvl(dt_admission_in, dt_admission)),
               flg_nit              = decode(l_flg_nit_n, 0, flg_nit_in, nvl(flg_nit_in, flg_nit)),
               dt_nit_suggested     = decode(l_dt_nit_suggested_n,
                                             0,
                                             dt_nit_suggested_in,
                                             nvl(dt_nit_suggested_in, dt_nit_suggested)),
               id_nit_dcs           = decode(l_id_nit_dcs_n, 0, id_nit_dcs_in, nvl(id_nit_dcs_in, id_nit_dcs)),
               id_nit_req           = decode(l_id_nit_req_n, 0, id_nit_req_in, nvl(id_nit_req_in, id_nit_req)),
               notes                = decode(l_notes_n, 0, notes_in, nvl(notes_in, notes)),
               flg_status           = decode(l_flg_status_n, 0, flg_status_in, nvl(flg_status_in, flg_status)),
               id_upd_episode       = decode(l_id_upd_episode_n,
                                             0,
                                             id_upd_episode_in,
                                             nvl(id_upd_episode_in, id_upd_episode)),
               id_upd_prof          = decode(l_id_upd_prof_n, 0, id_upd_prof_in, nvl(id_upd_prof_in, id_upd_prof)),
               dt_upd               = decode(l_dt_upd_n, 0, dt_upd_in, nvl(dt_upd_in, dt_upd)),
               id_upd_inst          = decode(l_id_upd_inst_n, 0, id_upd_inst_in, nvl(id_upd_inst_in, id_upd_inst)),
               create_user          = decode(l_create_user_n, 0, create_user_in, nvl(create_user_in, create_user)),
               create_time          = decode(l_create_time_n, 0, create_time_in, nvl(create_time_in, create_time)),
               create_institution   = decode(l_create_institution_n,
                                             0,
                                             create_institution_in,
                                             nvl(create_institution_in, create_institution)),
               update_user          = decode(l_update_user_n, 0, update_user_in, nvl(update_user_in, update_user)),
               update_time          = decode(l_update_time_n, 0, update_time_in, nvl(update_time_in, update_time)),
               update_institution   = decode(l_update_institution_n,
                                             0,
                                             update_institution_in,
                                             nvl(update_institution_in, update_institution)),
               flg_regim            = decode(l_flg_regim_n, 0, flg_regim_in, nvl(flg_regim_in, flg_regim)),
               flg_benefi           = decode(l_flg_benefi_n, 0, flg_benefi_in, nvl(flg_benefi_in, flg_benefi)),
               flg_precauc          = decode(l_flg_precauc_n, 0, flg_precauc_in, nvl(flg_precauc_in, flg_precauc)),
               flg_contact          = decode(l_flg_contact_n, 0, flg_contact_in, nvl(flg_contact_in, flg_contact)),
               flg_compulsory       = decode(l_flg_compulsory_n,
                                             0,
                                             flg_compulsory_in,
                                             nvl(flg_compulsory_in, flg_compulsory)),
               id_compulsory_reason = decode(l_id_compulsory_reason_n,
                                             0,
                                             id_compulsory_reason_in,
                                             nvl(id_compulsory_reason_in, id_compulsory_reason)),
               compulsory_reason    = decode(l_compulsory_reason_n,
                                             0,
                                             compulsory_reason_in,
                                             nvl(compulsory_reason_in, compulsory_reason))
         WHERE id_adm_request_hist = id_adm_request_hist_in
        RETURNING ROWID BULK COLLECT INTO l_rows_out;
        IF (rows_out IS NULL)
        THEN
            rows_out := table_varchar();
        END IF;
        rows_out := rows_out MULTISET UNION DISTINCT l_rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END upd;

    -- Update any/all columns by primary key. If you pass NULL, then
    -- the current column value is set to itself. If you need a more
    -- selected UPDATE then use one of the onecol procedures below.
    PROCEDURE upd
    (
        id_adm_request_hist_in   IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in        IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_request_nin       IN BOOLEAN := TRUE,
        id_adm_indication_in     IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_adm_indication_nin    IN BOOLEAN := TRUE,
        id_dest_episode_in       IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_episode_nin      IN BOOLEAN := TRUE,
        id_dest_prof_in          IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_prof_nin         IN BOOLEAN := TRUE,
        id_dest_inst_in          IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_dest_inst_nin         IN BOOLEAN := TRUE,
        id_department_in         IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_department_nin        IN BOOLEAN := TRUE,
        id_dep_clin_serv_in      IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_dep_clin_serv_nin     IN BOOLEAN := TRUE,
        id_room_type_in          IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_room_type_nin         IN BOOLEAN := TRUE,
        id_pref_room_in          IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_pref_room_nin         IN BOOLEAN := TRUE,
        id_admission_type_in     IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        id_admission_type_nin    IN BOOLEAN := TRUE,
        expected_duration_in     IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        expected_duration_nin    IN BOOLEAN := TRUE,
        id_adm_preparation_in    IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        id_adm_preparation_nin   IN BOOLEAN := TRUE,
        flg_mixed_nursing_in     IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        flg_mixed_nursing_nin    IN BOOLEAN := TRUE,
        id_bed_type_in           IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        id_bed_type_nin          IN BOOLEAN := TRUE,
        dt_admission_in          IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        dt_admission_nin         IN BOOLEAN := TRUE,
        flg_nit_in               IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        flg_nit_nin              IN BOOLEAN := TRUE,
        dt_nit_suggested_in      IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        dt_nit_suggested_nin     IN BOOLEAN := TRUE,
        id_nit_dcs_in            IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_dcs_nin           IN BOOLEAN := TRUE,
        id_nit_req_in            IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        id_nit_req_nin           IN BOOLEAN := TRUE,
        notes_in                 IN adm_request_hist.notes%TYPE DEFAULT NULL,
        notes_nin                IN BOOLEAN := TRUE,
        flg_status_in            IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        flg_status_nin           IN BOOLEAN := TRUE,
        id_upd_episode_in        IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_episode_nin       IN BOOLEAN := TRUE,
        id_upd_prof_in           IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        id_upd_prof_nin          IN BOOLEAN := TRUE,
        dt_upd_in                IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        dt_upd_nin               IN BOOLEAN := TRUE,
        id_upd_inst_in           IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        id_upd_inst_nin          IN BOOLEAN := TRUE,
        create_user_in           IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_user_nin          IN BOOLEAN := TRUE,
        create_time_in           IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_time_nin          IN BOOLEAN := TRUE,
        create_institution_in    IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        create_institution_nin   IN BOOLEAN := TRUE,
        update_user_in           IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_user_nin          IN BOOLEAN := TRUE,
        update_time_in           IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_time_nin          IN BOOLEAN := TRUE,
        update_institution_in    IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        update_institution_nin   IN BOOLEAN := TRUE,
        flg_regim_in             IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_regim_nin            IN BOOLEAN := TRUE,
        flg_benefi_in            IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_benefi_nin           IN BOOLEAN := TRUE,
        flg_precauc_in           IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_precauc_nin          IN BOOLEAN := TRUE,
        flg_contact_in           IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_contact_nin          IN BOOLEAN := TRUE,
        flg_compulsory_in        IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        flg_compulsory_nin       IN BOOLEAN := TRUE,
        id_compulsory_reason_in  IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        id_compulsory_reason_nin IN BOOLEAN := TRUE,
        compulsory_reason_in     IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_nin    IN BOOLEAN := TRUE,
        handle_error_in          IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        upd(id_adm_request_hist_in   => id_adm_request_hist_in,
            id_adm_request_in        => id_adm_request_in,
            id_adm_request_nin       => id_adm_request_nin,
            id_adm_indication_in     => id_adm_indication_in,
            id_adm_indication_nin    => id_adm_indication_nin,
            id_dest_episode_in       => id_dest_episode_in,
            id_dest_episode_nin      => id_dest_episode_nin,
            id_dest_prof_in          => id_dest_prof_in,
            id_dest_prof_nin         => id_dest_prof_nin,
            id_dest_inst_in          => id_dest_inst_in,
            id_dest_inst_nin         => id_dest_inst_nin,
            id_department_in         => id_department_in,
            id_department_nin        => id_department_nin,
            id_dep_clin_serv_in      => id_dep_clin_serv_in,
            id_dep_clin_serv_nin     => id_dep_clin_serv_nin,
            id_room_type_in          => id_room_type_in,
            id_room_type_nin         => id_room_type_nin,
            id_pref_room_in          => id_pref_room_in,
            id_pref_room_nin         => id_pref_room_nin,
            id_admission_type_in     => id_admission_type_in,
            id_admission_type_nin    => id_admission_type_nin,
            expected_duration_in     => expected_duration_in,
            expected_duration_nin    => expected_duration_nin,
            id_adm_preparation_in    => id_adm_preparation_in,
            id_adm_preparation_nin   => id_adm_preparation_nin,
            flg_mixed_nursing_in     => flg_mixed_nursing_in,
            flg_mixed_nursing_nin    => flg_mixed_nursing_nin,
            id_bed_type_in           => id_bed_type_in,
            id_bed_type_nin          => id_bed_type_nin,
            dt_admission_in          => dt_admission_in,
            dt_admission_nin         => dt_admission_nin,
            flg_nit_in               => flg_nit_in,
            flg_nit_nin              => flg_nit_nin,
            dt_nit_suggested_in      => dt_nit_suggested_in,
            dt_nit_suggested_nin     => dt_nit_suggested_nin,
            id_nit_dcs_in            => id_nit_dcs_in,
            id_nit_dcs_nin           => id_nit_dcs_nin,
            id_nit_req_in            => id_nit_req_in,
            id_nit_req_nin           => id_nit_req_nin,
            notes_in                 => notes_in,
            notes_nin                => notes_nin,
            flg_status_in            => flg_status_in,
            flg_status_nin           => flg_status_nin,
            id_upd_episode_in        => id_upd_episode_in,
            id_upd_episode_nin       => id_upd_episode_nin,
            id_upd_prof_in           => id_upd_prof_in,
            id_upd_prof_nin          => id_upd_prof_nin,
            dt_upd_in                => dt_upd_in,
            dt_upd_nin               => dt_upd_nin,
            id_upd_inst_in           => id_upd_inst_in,
            id_upd_inst_nin          => id_upd_inst_nin,
            create_user_in           => create_user_in,
            create_user_nin          => create_user_nin,
            create_time_in           => create_time_in,
            create_time_nin          => create_time_nin,
            create_institution_in    => create_institution_in,
            create_institution_nin   => create_institution_nin,
            update_user_in           => update_user_in,
            update_user_nin          => update_user_nin,
            update_time_in           => update_time_in,
            update_time_nin          => update_time_nin,
            update_institution_in    => update_institution_in,
            update_institution_nin   => update_institution_nin,
            flg_regim_in             => flg_regim_in,
            flg_regim_nin            => flg_regim_nin,
            flg_benefi_in            => flg_benefi_in,
            flg_benefi_nin           => flg_benefi_nin,
            flg_precauc_in           => flg_precauc_in,
            flg_precauc_nin          => flg_precauc_nin,
            flg_contact_in           => flg_contact_in,
            flg_contact_nin          => flg_contact_nin,
            flg_compulsory_in        => flg_compulsory_in,
            flg_compulsory_nin       => flg_compulsory_nin,
            id_compulsory_reason_in  => id_compulsory_reason_in,
            id_compulsory_reason_nin => id_compulsory_reason_nin,
            compulsory_reason_in     => compulsory_reason_in,
            compulsory_reason_nin    => compulsory_reason_nin,
            handle_error_in          => handle_error_in,
            rows_out                 => rows_out);
    END upd;

    --Update any/all columns by dynamic WHERE
    -- If you pass NULL, then the current column value is set to itself
    PROCEDURE upd
    (
        id_adm_request_in        IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_request_nin       IN BOOLEAN := TRUE,
        id_adm_indication_in     IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_adm_indication_nin    IN BOOLEAN := TRUE,
        id_dest_episode_in       IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_episode_nin      IN BOOLEAN := TRUE,
        id_dest_prof_in          IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_prof_nin         IN BOOLEAN := TRUE,
        id_dest_inst_in          IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_dest_inst_nin         IN BOOLEAN := TRUE,
        id_department_in         IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_department_nin        IN BOOLEAN := TRUE,
        id_dep_clin_serv_in      IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_dep_clin_serv_nin     IN BOOLEAN := TRUE,
        id_room_type_in          IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_room_type_nin         IN BOOLEAN := TRUE,
        id_pref_room_in          IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_pref_room_nin         IN BOOLEAN := TRUE,
        id_admission_type_in     IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        id_admission_type_nin    IN BOOLEAN := TRUE,
        expected_duration_in     IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        expected_duration_nin    IN BOOLEAN := TRUE,
        id_adm_preparation_in    IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        id_adm_preparation_nin   IN BOOLEAN := TRUE,
        flg_mixed_nursing_in     IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        flg_mixed_nursing_nin    IN BOOLEAN := TRUE,
        id_bed_type_in           IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        id_bed_type_nin          IN BOOLEAN := TRUE,
        dt_admission_in          IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        dt_admission_nin         IN BOOLEAN := TRUE,
        flg_nit_in               IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        flg_nit_nin              IN BOOLEAN := TRUE,
        dt_nit_suggested_in      IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        dt_nit_suggested_nin     IN BOOLEAN := TRUE,
        id_nit_dcs_in            IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_dcs_nin           IN BOOLEAN := TRUE,
        id_nit_req_in            IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        id_nit_req_nin           IN BOOLEAN := TRUE,
        notes_in                 IN adm_request_hist.notes%TYPE DEFAULT NULL,
        notes_nin                IN BOOLEAN := TRUE,
        flg_status_in            IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        flg_status_nin           IN BOOLEAN := TRUE,
        id_upd_episode_in        IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_episode_nin       IN BOOLEAN := TRUE,
        id_upd_prof_in           IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        id_upd_prof_nin          IN BOOLEAN := TRUE,
        dt_upd_in                IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        dt_upd_nin               IN BOOLEAN := TRUE,
        id_upd_inst_in           IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        id_upd_inst_nin          IN BOOLEAN := TRUE,
        create_user_in           IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_user_nin          IN BOOLEAN := TRUE,
        create_time_in           IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_time_nin          IN BOOLEAN := TRUE,
        create_institution_in    IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        create_institution_nin   IN BOOLEAN := TRUE,
        update_user_in           IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_user_nin          IN BOOLEAN := TRUE,
        update_time_in           IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_time_nin          IN BOOLEAN := TRUE,
        update_institution_in    IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        update_institution_nin   IN BOOLEAN := TRUE,
        flg_regim_in             IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_regim_nin            IN BOOLEAN := TRUE,
        flg_benefi_in            IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_benefi_nin           IN BOOLEAN := TRUE,
        flg_precauc_in           IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_precauc_nin          IN BOOLEAN := TRUE,
        flg_contact_in           IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_contact_nin          IN BOOLEAN := TRUE,
        flg_compulsory_in        IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        flg_compulsory_nin       IN BOOLEAN := TRUE,
        id_compulsory_reason_in  IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        id_compulsory_reason_nin IN BOOLEAN := TRUE,
        compulsory_reason_in     IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_nin    IN BOOLEAN := TRUE,
        where_in                 IN VARCHAR2,
        handle_error_in          IN BOOLEAN := TRUE,
        rows_out                 IN OUT table_varchar
    ) IS
        l_sql                    VARCHAR2(32767);
        l_rows_out               table_varchar;
        l_id_adm_request_n       NUMBER(1) := sys.diutil.bool_to_int(id_adm_request_nin);
        l_id_adm_indication_n    NUMBER(1) := sys.diutil.bool_to_int(id_adm_indication_nin);
        l_id_dest_episode_n      NUMBER(1) := sys.diutil.bool_to_int(id_dest_episode_nin);
        l_id_dest_prof_n         NUMBER(1) := sys.diutil.bool_to_int(id_dest_prof_nin);
        l_id_dest_inst_n         NUMBER(1) := sys.diutil.bool_to_int(id_dest_inst_nin);
        l_id_department_n        NUMBER(1) := sys.diutil.bool_to_int(id_department_nin);
        l_id_dep_clin_serv_n     NUMBER(1) := sys.diutil.bool_to_int(id_dep_clin_serv_nin);
        l_id_room_type_n         NUMBER(1) := sys.diutil.bool_to_int(id_room_type_nin);
        l_id_pref_room_n         NUMBER(1) := sys.diutil.bool_to_int(id_pref_room_nin);
        l_id_admission_type_n    NUMBER(1) := sys.diutil.bool_to_int(id_admission_type_nin);
        l_expected_duration_n    NUMBER(1) := sys.diutil.bool_to_int(expected_duration_nin);
        l_id_adm_preparation_n   NUMBER(1) := sys.diutil.bool_to_int(id_adm_preparation_nin);
        l_flg_mixed_nursing_n    NUMBER(1) := sys.diutil.bool_to_int(flg_mixed_nursing_nin);
        l_id_bed_type_n          NUMBER(1) := sys.diutil.bool_to_int(id_bed_type_nin);
        l_dt_admission_n         NUMBER(1) := sys.diutil.bool_to_int(dt_admission_nin);
        l_flg_nit_n              NUMBER(1) := sys.diutil.bool_to_int(flg_nit_nin);
        l_dt_nit_suggested_n     NUMBER(1) := sys.diutil.bool_to_int(dt_nit_suggested_nin);
        l_id_nit_dcs_n           NUMBER(1) := sys.diutil.bool_to_int(id_nit_dcs_nin);
        l_id_nit_req_n           NUMBER(1) := sys.diutil.bool_to_int(id_nit_req_nin);
        l_notes_n                NUMBER(1) := sys.diutil.bool_to_int(notes_nin);
        l_flg_status_n           NUMBER(1) := sys.diutil.bool_to_int(flg_status_nin);
        l_id_upd_episode_n       NUMBER(1) := sys.diutil.bool_to_int(id_upd_episode_nin);
        l_id_upd_prof_n          NUMBER(1) := sys.diutil.bool_to_int(id_upd_prof_nin);
        l_dt_upd_n               NUMBER(1) := sys.diutil.bool_to_int(dt_upd_nin);
        l_id_upd_inst_n          NUMBER(1) := sys.diutil.bool_to_int(id_upd_inst_nin);
        l_create_user_n          NUMBER(1) := sys.diutil.bool_to_int(create_user_nin);
        l_create_time_n          NUMBER(1) := sys.diutil.bool_to_int(create_time_nin);
        l_create_institution_n   NUMBER(1) := sys.diutil.bool_to_int(create_institution_nin);
        l_update_user_n          NUMBER(1) := sys.diutil.bool_to_int(update_user_nin);
        l_update_time_n          NUMBER(1) := sys.diutil.bool_to_int(update_time_nin);
        l_update_institution_n   NUMBER(1) := sys.diutil.bool_to_int(update_institution_nin);
        l_flg_regim_n            NUMBER(1) := sys.diutil.bool_to_int(flg_regim_nin);
        l_flg_benefi_n           NUMBER(1) := sys.diutil.bool_to_int(flg_benefi_nin);
        l_flg_precauc_n          NUMBER(1) := sys.diutil.bool_to_int(flg_precauc_nin);
        l_flg_contact_n          NUMBER(1) := sys.diutil.bool_to_int(flg_contact_nin);
        l_flg_compulsory_n       NUMBER(1) := sys.diutil.bool_to_int(flg_compulsory_nin);
        l_id_compulsory_reason_n NUMBER(1) := sys.diutil.bool_to_int(id_compulsory_reason_nin);
        l_compulsory_reason_n    NUMBER(1) := sys.diutil.bool_to_int(compulsory_reason_nin);
    BEGIN
        l_id_adm_request_n       := sys.diutil.bool_to_int(id_adm_request_nin);
        l_id_adm_indication_n    := sys.diutil.bool_to_int(id_adm_indication_nin);
        l_id_dest_episode_n      := sys.diutil.bool_to_int(id_dest_episode_nin);
        l_id_dest_prof_n         := sys.diutil.bool_to_int(id_dest_prof_nin);
        l_id_dest_inst_n         := sys.diutil.bool_to_int(id_dest_inst_nin);
        l_id_department_n        := sys.diutil.bool_to_int(id_department_nin);
        l_id_dep_clin_serv_n     := sys.diutil.bool_to_int(id_dep_clin_serv_nin);
        l_id_room_type_n         := sys.diutil.bool_to_int(id_room_type_nin);
        l_id_pref_room_n         := sys.diutil.bool_to_int(id_pref_room_nin);
        l_id_admission_type_n    := sys.diutil.bool_to_int(id_admission_type_nin);
        l_expected_duration_n    := sys.diutil.bool_to_int(expected_duration_nin);
        l_id_adm_preparation_n   := sys.diutil.bool_to_int(id_adm_preparation_nin);
        l_flg_mixed_nursing_n    := sys.diutil.bool_to_int(flg_mixed_nursing_nin);
        l_id_bed_type_n          := sys.diutil.bool_to_int(id_bed_type_nin);
        l_dt_admission_n         := sys.diutil.bool_to_int(dt_admission_nin);
        l_flg_nit_n              := sys.diutil.bool_to_int(flg_nit_nin);
        l_dt_nit_suggested_n     := sys.diutil.bool_to_int(dt_nit_suggested_nin);
        l_id_nit_dcs_n           := sys.diutil.bool_to_int(id_nit_dcs_nin);
        l_id_nit_req_n           := sys.diutil.bool_to_int(id_nit_req_nin);
        l_notes_n                := sys.diutil.bool_to_int(notes_nin);
        l_flg_status_n           := sys.diutil.bool_to_int(flg_status_nin);
        l_id_upd_episode_n       := sys.diutil.bool_to_int(id_upd_episode_nin);
        l_id_upd_prof_n          := sys.diutil.bool_to_int(id_upd_prof_nin);
        l_dt_upd_n               := sys.diutil.bool_to_int(dt_upd_nin);
        l_id_upd_inst_n          := sys.diutil.bool_to_int(id_upd_inst_nin);
        l_create_user_n          := sys.diutil.bool_to_int(create_user_nin);
        l_create_time_n          := sys.diutil.bool_to_int(create_time_nin);
        l_create_institution_n   := sys.diutil.bool_to_int(create_institution_nin);
        l_update_user_n          := sys.diutil.bool_to_int(update_user_nin);
        l_update_time_n          := sys.diutil.bool_to_int(update_time_nin);
        l_update_institution_n   := sys.diutil.bool_to_int(update_institution_nin);
        l_flg_regim_n            := sys.diutil.bool_to_int(flg_regim_nin);
        l_flg_benefi_n           := sys.diutil.bool_to_int(flg_benefi_nin);
        l_flg_precauc_n          := sys.diutil.bool_to_int(flg_precauc_nin);
        l_flg_contact_n          := sys.diutil.bool_to_int(flg_contact_nin);
        l_flg_compulsory_n       := sys.diutil.bool_to_int(flg_compulsory_nin);
        l_id_compulsory_reason_n := sys.diutil.bool_to_int(id_compulsory_reason_nin);
        l_compulsory_reason_n    := sys.diutil.bool_to_int(compulsory_reason_nin);
        l_sql                    := 'UPDATE adm_request_hist SET' || ' ID_ADM_REQUEST = decode (' || l_id_adm_request_n ||
                                    ',0,:ID_ADM_REQUEST_in, NVL (:ID_ADM_REQUEST_in, ID_ADM_REQUEST)) ' || ',' ||
                                    ' ID_ADM_INDICATION = decode (' || l_id_adm_indication_n ||
                                    ',0,:ID_ADM_INDICATION_in, NVL (:ID_ADM_INDICATION_in, ID_ADM_INDICATION)) ' || ',' ||
                                    ' ID_DEST_EPISODE = decode (' || l_id_dest_episode_n ||
                                    ',0,:ID_DEST_EPISODE_in, NVL (:ID_DEST_EPISODE_in, ID_DEST_EPISODE)) ' || ',' ||
                                    ' ID_DEST_PROF = decode (' || l_id_dest_prof_n ||
                                    ',0,:ID_DEST_PROF_in, NVL (:ID_DEST_PROF_in, ID_DEST_PROF)) ' || ',' ||
                                    ' ID_DEST_INST = decode (' || l_id_dest_inst_n ||
                                    ',0,:ID_DEST_INST_in, NVL (:ID_DEST_INST_in, ID_DEST_INST)) ' || ',' ||
                                    ' ID_DEPARTMENT = decode (' || l_id_department_n ||
                                    ',0,:ID_DEPARTMENT_in, NVL (:ID_DEPARTMENT_in, ID_DEPARTMENT)) ' || ',' ||
                                    ' ID_DEP_CLIN_SERV = decode (' || l_id_dep_clin_serv_n ||
                                    ',0,:ID_DEP_CLIN_SERV_in, NVL (:ID_DEP_CLIN_SERV_in, ID_DEP_CLIN_SERV)) ' || ',' ||
                                    ' ID_ROOM_TYPE = decode (' || l_id_room_type_n ||
                                    ',0,:ID_ROOM_TYPE_in, NVL (:ID_ROOM_TYPE_in, ID_ROOM_TYPE)) ' || ',' ||
                                    ' ID_PREF_ROOM = decode (' || l_id_pref_room_n ||
                                    ',0,:ID_PREF_ROOM_in, NVL (:ID_PREF_ROOM_in, ID_PREF_ROOM)) ' || ',' ||
                                    ' ID_ADMISSION_TYPE = decode (' || l_id_admission_type_n ||
                                    ',0,:ID_ADMISSION_TYPE_in, NVL (:ID_ADMISSION_TYPE_in, ID_ADMISSION_TYPE)) ' || ',' ||
                                    ' EXPECTED_DURATION = decode (' || l_expected_duration_n ||
                                    ',0,:EXPECTED_DURATION_in, NVL (:EXPECTED_DURATION_in, EXPECTED_DURATION)) ' || ',' ||
                                    ' ID_ADM_PREPARATION = decode (' || l_id_adm_preparation_n ||
                                    ',0,:ID_ADM_PREPARATION_in, NVL (:ID_ADM_PREPARATION_in, ID_ADM_PREPARATION)) ' || ',' ||
                                    ' FLG_MIXED_NURSING = decode (' || l_flg_mixed_nursing_n ||
                                    ',0,:FLG_MIXED_NURSING_in, NVL (:FLG_MIXED_NURSING_in, FLG_MIXED_NURSING)) ' || ',' ||
                                    ' ID_BED_TYPE = decode (' || l_id_bed_type_n ||
                                    ',0,:ID_BED_TYPE_in, NVL (:ID_BED_TYPE_in, ID_BED_TYPE)) ' || ',' ||
                                    ' DT_ADMISSION = decode (' || l_dt_admission_n ||
                                    ',0,:DT_ADMISSION_in, NVL (:DT_ADMISSION_in, DT_ADMISSION)) ' || ',' ||
                                    ' FLG_NIT = decode (' || l_flg_nit_n ||
                                    ',0,:FLG_NIT_in, NVL (:FLG_NIT_in, FLG_NIT)) ' || ',' ||
                                    ' DT_NIT_SUGGESTED = decode (' || l_dt_nit_suggested_n ||
                                    ',0,:DT_NIT_SUGGESTED_in, NVL (:DT_NIT_SUGGESTED_in, DT_NIT_SUGGESTED)) ' || ',' ||
                                    ' ID_NIT_DCS = decode (' || l_id_nit_dcs_n ||
                                    ',0,:ID_NIT_DCS_in, NVL (:ID_NIT_DCS_in, ID_NIT_DCS)) ' || ',' ||
                                    ' ID_NIT_REQ = decode (' || l_id_nit_req_n ||
                                    ',0,:ID_NIT_REQ_in, NVL (:ID_NIT_REQ_in, ID_NIT_REQ)) ' || ',' ||
                                    ' NOTES = decode (' || l_notes_n || ',0,:NOTES_in, NVL (:NOTES_in, NOTES)) ' || ',' ||
                                    ' FLG_STATUS = decode (' || l_flg_status_n ||
                                    ',0,:FLG_STATUS_in, NVL (:FLG_STATUS_in, FLG_STATUS)) ' || ',' ||
                                    ' ID_UPD_EPISODE = decode (' || l_id_upd_episode_n ||
                                    ',0,:ID_UPD_EPISODE_in, NVL (:ID_UPD_EPISODE_in, ID_UPD_EPISODE)) ' || ',' ||
                                    ' ID_UPD_PROF = decode (' || l_id_upd_prof_n ||
                                    ',0,:ID_UPD_PROF_in, NVL (:ID_UPD_PROF_in, ID_UPD_PROF)) ' || ',' ||
                                    ' DT_UPD = decode (' || l_dt_upd_n || ',0,:DT_UPD_in, NVL (:DT_UPD_in, DT_UPD)) ' || ',' ||
                                    ' ID_UPD_INST = decode (' || l_id_upd_inst_n ||
                                    ',0,:ID_UPD_INST_in, NVL (:ID_UPD_INST_in, ID_UPD_INST)) ' || ',' ||
                                    ' CREATE_USER = decode (' || l_create_user_n ||
                                    ',0,:CREATE_USER_in, NVL (:CREATE_USER_in, CREATE_USER)) ' || ',' ||
                                    ' CREATE_TIME = decode (' || l_create_time_n ||
                                    ',0,:CREATE_TIME_in, NVL (:CREATE_TIME_in, CREATE_TIME)) ' || ',' ||
                                    ' CREATE_INSTITUTION = decode (' || l_create_institution_n ||
                                    ',0,:CREATE_INSTITUTION_in, NVL (:CREATE_INSTITUTION_in, CREATE_INSTITUTION)) ' || ',' ||
                                    ' UPDATE_USER = decode (' || l_update_user_n ||
                                    ',0,:UPDATE_USER_in, NVL (:UPDATE_USER_in, UPDATE_USER)) ' || ',' ||
                                    ' UPDATE_TIME = decode (' || l_update_time_n ||
                                    ',0,:UPDATE_TIME_in, NVL (:UPDATE_TIME_in, UPDATE_TIME)) ' || ',' ||
                                    ' UPDATE_INSTITUTION = decode (' || l_update_institution_n ||
                                    ',0,:UPDATE_INSTITUTION_in, NVL (:UPDATE_INSTITUTION_in, UPDATE_INSTITUTION)) ' || ',' ||
                                    ' FLG_REGIM = decode (' || l_flg_regim_n ||
                                    ',0,:FLG_REGIM_in, NVL (:FLG_REGIM_in, FLG_REGIM)) ' || ',' ||
                                    ' FLG_BENEFI = decode (' || l_flg_benefi_n ||
                                    ',0,:FLG_BENEFI_in, NVL (:FLG_BENEFI_in, FLG_BENEFI)) ' || ',' ||
                                    ' FLG_PRECAUC = decode (' || l_flg_precauc_n ||
                                    ',0,:FLG_PRECAUC_in, NVL (:FLG_PRECAUC_in, FLG_PRECAUC)) ' || ',' ||
                                    ' FLG_CONTACT = decode (' || l_flg_contact_n ||
                                    ',0,:FLG_CONTACT_in, NVL (:FLG_CONTACT_in, FLG_CONTACT)) ' || ',' ||
                                    ' FLG_COMPULSORY = decode (' || l_flg_compulsory_n ||
                                    ',0,:FLG_COMPULSORY_in, NVL (:FLG_COMPULSORY_in, FLG_COMPULSORY)) ' || ',' ||
                                    ' ID_COMPULSORY_REASON = decode (' || l_id_compulsory_reason_n ||
                                    ',0,:ID_COMPULSORY_REASON_in, NVL (:ID_COMPULSORY_REASON_in, ID_COMPULSORY_REASON)) ' || ',' ||
                                    ' COMPULSORY_REASON = decode (' || l_compulsory_reason_n ||
                                    ',0,:COMPULSORY_REASON_in, NVL (:COMPULSORY_REASON_in, COMPULSORY_REASON)) ' ||
                                    ' where ' || nvl(where_in, '(1=1)') ||
                                    ' RETURNING ROWID BULK COLLECT INTO :l_rows_out';
        EXECUTE IMMEDIATE 'BEGIN ' || l_sql || '; END;'
            USING IN id_adm_request_in, id_adm_indication_in, id_dest_episode_in, id_dest_prof_in, id_dest_inst_in, id_department_in, id_dep_clin_serv_in, id_room_type_in, id_pref_room_in, id_admission_type_in, expected_duration_in, id_adm_preparation_in, flg_mixed_nursing_in, id_bed_type_in, dt_admission_in, flg_nit_in, dt_nit_suggested_in, id_nit_dcs_in, id_nit_req_in, notes_in, flg_status_in, id_upd_episode_in, id_upd_prof_in, dt_upd_in, id_upd_inst_in, create_user_in, create_time_in, create_institution_in, update_user_in, update_time_in, update_institution_in, flg_regim_in, flg_benefi_in, flg_precauc_in, flg_contact_in, flg_compulsory_in, id_compulsory_reason_in, compulsory_reason_in, OUT l_rows_out;
        IF (rows_out IS NULL)
        THEN
            rows_out := table_varchar();
        END IF;
        rows_out := rows_out MULTISET UNION DISTINCT l_rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END upd;

    --Update any/all columns by dynamic WHERE
    -- If you pass NULL, then the current column value is set to itself
    PROCEDURE upd
    (
        id_adm_request_in        IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_request_nin       IN BOOLEAN := TRUE,
        id_adm_indication_in     IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_adm_indication_nin    IN BOOLEAN := TRUE,
        id_dest_episode_in       IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_episode_nin      IN BOOLEAN := TRUE,
        id_dest_prof_in          IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_prof_nin         IN BOOLEAN := TRUE,
        id_dest_inst_in          IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_dest_inst_nin         IN BOOLEAN := TRUE,
        id_department_in         IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_department_nin        IN BOOLEAN := TRUE,
        id_dep_clin_serv_in      IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_dep_clin_serv_nin     IN BOOLEAN := TRUE,
        id_room_type_in          IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_room_type_nin         IN BOOLEAN := TRUE,
        id_pref_room_in          IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_pref_room_nin         IN BOOLEAN := TRUE,
        id_admission_type_in     IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        id_admission_type_nin    IN BOOLEAN := TRUE,
        expected_duration_in     IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        expected_duration_nin    IN BOOLEAN := TRUE,
        id_adm_preparation_in    IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        id_adm_preparation_nin   IN BOOLEAN := TRUE,
        flg_mixed_nursing_in     IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        flg_mixed_nursing_nin    IN BOOLEAN := TRUE,
        id_bed_type_in           IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        id_bed_type_nin          IN BOOLEAN := TRUE,
        dt_admission_in          IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        dt_admission_nin         IN BOOLEAN := TRUE,
        flg_nit_in               IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        flg_nit_nin              IN BOOLEAN := TRUE,
        dt_nit_suggested_in      IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        dt_nit_suggested_nin     IN BOOLEAN := TRUE,
        id_nit_dcs_in            IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_dcs_nin           IN BOOLEAN := TRUE,
        id_nit_req_in            IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        id_nit_req_nin           IN BOOLEAN := TRUE,
        notes_in                 IN adm_request_hist.notes%TYPE DEFAULT NULL,
        notes_nin                IN BOOLEAN := TRUE,
        flg_status_in            IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        flg_status_nin           IN BOOLEAN := TRUE,
        id_upd_episode_in        IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_episode_nin       IN BOOLEAN := TRUE,
        id_upd_prof_in           IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        id_upd_prof_nin          IN BOOLEAN := TRUE,
        dt_upd_in                IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        dt_upd_nin               IN BOOLEAN := TRUE,
        id_upd_inst_in           IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        id_upd_inst_nin          IN BOOLEAN := TRUE,
        create_user_in           IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_user_nin          IN BOOLEAN := TRUE,
        create_time_in           IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_time_nin          IN BOOLEAN := TRUE,
        create_institution_in    IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        create_institution_nin   IN BOOLEAN := TRUE,
        update_user_in           IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_user_nin          IN BOOLEAN := TRUE,
        update_time_in           IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_time_nin          IN BOOLEAN := TRUE,
        update_institution_in    IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        update_institution_nin   IN BOOLEAN := TRUE,
        flg_regim_in             IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_regim_nin            IN BOOLEAN := TRUE,
        flg_benefi_in            IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_benefi_nin           IN BOOLEAN := TRUE,
        flg_precauc_in           IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_precauc_nin          IN BOOLEAN := TRUE,
        flg_contact_in           IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_contact_nin          IN BOOLEAN := TRUE,
        flg_compulsory_in        IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        flg_compulsory_nin       IN BOOLEAN := TRUE,
        id_compulsory_reason_in  IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        id_compulsory_reason_nin IN BOOLEAN := TRUE,
        compulsory_reason_in     IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_nin    IN BOOLEAN := TRUE,
        where_in                 IN VARCHAR2,
        handle_error_in          IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        upd(id_adm_request_in        => id_adm_request_in,
            id_adm_request_nin       => id_adm_request_nin,
            id_adm_indication_in     => id_adm_indication_in,
            id_adm_indication_nin    => id_adm_indication_nin,
            id_dest_episode_in       => id_dest_episode_in,
            id_dest_episode_nin      => id_dest_episode_nin,
            id_dest_prof_in          => id_dest_prof_in,
            id_dest_prof_nin         => id_dest_prof_nin,
            id_dest_inst_in          => id_dest_inst_in,
            id_dest_inst_nin         => id_dest_inst_nin,
            id_department_in         => id_department_in,
            id_department_nin        => id_department_nin,
            id_dep_clin_serv_in      => id_dep_clin_serv_in,
            id_dep_clin_serv_nin     => id_dep_clin_serv_nin,
            id_room_type_in          => id_room_type_in,
            id_room_type_nin         => id_room_type_nin,
            id_pref_room_in          => id_pref_room_in,
            id_pref_room_nin         => id_pref_room_nin,
            id_admission_type_in     => id_admission_type_in,
            id_admission_type_nin    => id_admission_type_nin,
            expected_duration_in     => expected_duration_in,
            expected_duration_nin    => expected_duration_nin,
            id_adm_preparation_in    => id_adm_preparation_in,
            id_adm_preparation_nin   => id_adm_preparation_nin,
            flg_mixed_nursing_in     => flg_mixed_nursing_in,
            flg_mixed_nursing_nin    => flg_mixed_nursing_nin,
            id_bed_type_in           => id_bed_type_in,
            id_bed_type_nin          => id_bed_type_nin,
            dt_admission_in          => dt_admission_in,
            dt_admission_nin         => dt_admission_nin,
            flg_nit_in               => flg_nit_in,
            flg_nit_nin              => flg_nit_nin,
            dt_nit_suggested_in      => dt_nit_suggested_in,
            dt_nit_suggested_nin     => dt_nit_suggested_nin,
            id_nit_dcs_in            => id_nit_dcs_in,
            id_nit_dcs_nin           => id_nit_dcs_nin,
            id_nit_req_in            => id_nit_req_in,
            id_nit_req_nin           => id_nit_req_nin,
            notes_in                 => notes_in,
            notes_nin                => notes_nin,
            flg_status_in            => flg_status_in,
            flg_status_nin           => flg_status_nin,
            id_upd_episode_in        => id_upd_episode_in,
            id_upd_episode_nin       => id_upd_episode_nin,
            id_upd_prof_in           => id_upd_prof_in,
            id_upd_prof_nin          => id_upd_prof_nin,
            dt_upd_in                => dt_upd_in,
            dt_upd_nin               => dt_upd_nin,
            id_upd_inst_in           => id_upd_inst_in,
            id_upd_inst_nin          => id_upd_inst_nin,
            create_user_in           => create_user_in,
            create_user_nin          => create_user_nin,
            create_time_in           => create_time_in,
            create_time_nin          => create_time_nin,
            create_institution_in    => create_institution_in,
            create_institution_nin   => create_institution_nin,
            update_user_in           => update_user_in,
            update_user_nin          => update_user_nin,
            update_time_in           => update_time_in,
            update_time_nin          => update_time_nin,
            update_institution_in    => update_institution_in,
            update_institution_nin   => update_institution_nin,
            flg_regim_in             => flg_regim_in,
            flg_regim_nin            => flg_regim_nin,
            flg_benefi_in            => flg_benefi_in,
            flg_benefi_nin           => flg_benefi_nin,
            flg_precauc_in           => flg_precauc_in,
            flg_precauc_nin          => flg_precauc_nin,
            flg_contact_in           => flg_contact_in,
            flg_contact_nin          => flg_contact_nin,
            flg_compulsory_in        => flg_compulsory_in,
            flg_compulsory_nin       => flg_compulsory_nin,
            id_compulsory_reason_in  => id_compulsory_reason_in,
            id_compulsory_reason_nin => id_compulsory_reason_nin,
            compulsory_reason_in     => compulsory_reason_in,
            compulsory_reason_nin    => compulsory_reason_nin,
            where_in                 => where_in,
            handle_error_in          => handle_error_in,
            rows_out                 => rows_out);
    END upd;

    --Update/insert columns (with rows_out)
    PROCEDURE upd_ins
    (
        id_adm_request_hist_in  IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        handle_error_in         IN BOOLEAN := TRUE,
        rows_out                IN OUT table_varchar
    ) IS
    BEGIN
        upd(id_adm_request_hist_in  => id_adm_request_hist_in,
            id_adm_request_in       => id_adm_request_in,
            id_adm_indication_in    => id_adm_indication_in,
            id_dest_episode_in      => id_dest_episode_in,
            id_dest_prof_in         => id_dest_prof_in,
            id_dest_inst_in         => id_dest_inst_in,
            id_department_in        => id_department_in,
            id_dep_clin_serv_in     => id_dep_clin_serv_in,
            id_room_type_in         => id_room_type_in,
            id_pref_room_in         => id_pref_room_in,
            id_admission_type_in    => id_admission_type_in,
            expected_duration_in    => expected_duration_in,
            id_adm_preparation_in   => id_adm_preparation_in,
            flg_mixed_nursing_in    => flg_mixed_nursing_in,
            id_bed_type_in          => id_bed_type_in,
            dt_admission_in         => dt_admission_in,
            flg_nit_in              => flg_nit_in,
            dt_nit_suggested_in     => dt_nit_suggested_in,
            id_nit_dcs_in           => id_nit_dcs_in,
            id_nit_req_in           => id_nit_req_in,
            notes_in                => notes_in,
            flg_status_in           => flg_status_in,
            id_upd_episode_in       => id_upd_episode_in,
            id_upd_prof_in          => id_upd_prof_in,
            dt_upd_in               => dt_upd_in,
            id_upd_inst_in          => id_upd_inst_in,
            create_user_in          => create_user_in,
            create_time_in          => create_time_in,
            create_institution_in   => create_institution_in,
            update_user_in          => update_user_in,
            update_time_in          => update_time_in,
            update_institution_in   => update_institution_in,
            flg_regim_in            => flg_regim_in,
            flg_benefi_in           => flg_benefi_in,
            flg_precauc_in          => flg_precauc_in,
            flg_contact_in          => flg_contact_in,
            flg_compulsory_in       => flg_compulsory_in,
            id_compulsory_reason_in => id_compulsory_reason_in,
            compulsory_reason_in    => compulsory_reason_in,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
        IF SQL%ROWCOUNT = 0
        THEN
            ins(id_adm_request_hist_in  => id_adm_request_hist_in,
                id_adm_request_in       => id_adm_request_in,
                id_adm_indication_in    => id_adm_indication_in,
                id_dest_episode_in      => id_dest_episode_in,
                id_dest_prof_in         => id_dest_prof_in,
                id_dest_inst_in         => id_dest_inst_in,
                id_department_in        => id_department_in,
                id_dep_clin_serv_in     => id_dep_clin_serv_in,
                id_room_type_in         => id_room_type_in,
                id_pref_room_in         => id_pref_room_in,
                id_admission_type_in    => id_admission_type_in,
                expected_duration_in    => expected_duration_in,
                id_adm_preparation_in   => id_adm_preparation_in,
                flg_mixed_nursing_in    => flg_mixed_nursing_in,
                id_bed_type_in          => id_bed_type_in,
                dt_admission_in         => dt_admission_in,
                flg_nit_in              => flg_nit_in,
                dt_nit_suggested_in     => dt_nit_suggested_in,
                id_nit_dcs_in           => id_nit_dcs_in,
                id_nit_req_in           => id_nit_req_in,
                notes_in                => notes_in,
                flg_status_in           => flg_status_in,
                id_upd_episode_in       => id_upd_episode_in,
                id_upd_prof_in          => id_upd_prof_in,
                dt_upd_in               => dt_upd_in,
                id_upd_inst_in          => id_upd_inst_in,
                create_user_in          => create_user_in,
                create_time_in          => create_time_in,
                create_institution_in   => create_institution_in,
                update_user_in          => update_user_in,
                update_time_in          => update_time_in,
                update_institution_in   => update_institution_in,
                flg_regim_in            => flg_regim_in,
                flg_benefi_in           => flg_benefi_in,
                flg_precauc_in          => flg_precauc_in,
                flg_contact_in          => flg_contact_in,
                flg_compulsory_in       => flg_compulsory_in,
                id_compulsory_reason_in => id_compulsory_reason_in,
                compulsory_reason_in    => compulsory_reason_in,
                handle_error_in         => handle_error_in,
                rows_out                => rows_out);
        END IF;
    END upd_ins;

    --Update/insert columns (without rows_out)
    PROCEDURE upd_ins
    (
        id_adm_request_hist_in  IN adm_request_hist.id_adm_request_hist%TYPE,
        id_adm_request_in       IN adm_request_hist.id_adm_request%TYPE DEFAULT NULL,
        id_adm_indication_in    IN adm_request_hist.id_adm_indication%TYPE DEFAULT NULL,
        id_dest_episode_in      IN adm_request_hist.id_dest_episode%TYPE DEFAULT NULL,
        id_dest_prof_in         IN adm_request_hist.id_dest_prof%TYPE DEFAULT NULL,
        id_dest_inst_in         IN adm_request_hist.id_dest_inst%TYPE DEFAULT NULL,
        id_department_in        IN adm_request_hist.id_department%TYPE DEFAULT NULL,
        id_dep_clin_serv_in     IN adm_request_hist.id_dep_clin_serv%TYPE DEFAULT NULL,
        id_room_type_in         IN adm_request_hist.id_room_type%TYPE DEFAULT NULL,
        id_pref_room_in         IN adm_request_hist.id_pref_room%TYPE DEFAULT NULL,
        id_admission_type_in    IN adm_request_hist.id_admission_type%TYPE DEFAULT NULL,
        expected_duration_in    IN adm_request_hist.expected_duration%TYPE DEFAULT NULL,
        id_adm_preparation_in   IN adm_request_hist.id_adm_preparation%TYPE DEFAULT NULL,
        flg_mixed_nursing_in    IN adm_request_hist.flg_mixed_nursing%TYPE DEFAULT NULL,
        id_bed_type_in          IN adm_request_hist.id_bed_type%TYPE DEFAULT NULL,
        dt_admission_in         IN adm_request_hist.dt_admission%TYPE DEFAULT NULL,
        flg_nit_in              IN adm_request_hist.flg_nit%TYPE DEFAULT NULL,
        dt_nit_suggested_in     IN adm_request_hist.dt_nit_suggested%TYPE DEFAULT NULL,
        id_nit_dcs_in           IN adm_request_hist.id_nit_dcs%TYPE DEFAULT NULL,
        id_nit_req_in           IN adm_request_hist.id_nit_req%TYPE DEFAULT NULL,
        notes_in                IN adm_request_hist.notes%TYPE DEFAULT NULL,
        flg_status_in           IN adm_request_hist.flg_status%TYPE DEFAULT NULL,
        id_upd_episode_in       IN adm_request_hist.id_upd_episode%TYPE DEFAULT NULL,
        id_upd_prof_in          IN adm_request_hist.id_upd_prof%TYPE DEFAULT NULL,
        dt_upd_in               IN adm_request_hist.dt_upd%TYPE DEFAULT NULL,
        id_upd_inst_in          IN adm_request_hist.id_upd_inst%TYPE DEFAULT NULL,
        create_user_in          IN adm_request_hist.create_user%TYPE DEFAULT NULL,
        create_time_in          IN adm_request_hist.create_time%TYPE DEFAULT NULL,
        create_institution_in   IN adm_request_hist.create_institution%TYPE DEFAULT NULL,
        update_user_in          IN adm_request_hist.update_user%TYPE DEFAULT NULL,
        update_time_in          IN adm_request_hist.update_time%TYPE DEFAULT NULL,
        update_institution_in   IN adm_request_hist.update_institution%TYPE DEFAULT NULL,
        flg_regim_in            IN adm_request_hist.flg_regim%TYPE DEFAULT NULL,
        flg_benefi_in           IN adm_request_hist.flg_benefi%TYPE DEFAULT NULL,
        flg_precauc_in          IN adm_request_hist.flg_precauc%TYPE DEFAULT NULL,
        flg_contact_in          IN adm_request_hist.flg_contact%TYPE DEFAULT NULL,
        flg_compulsory_in       IN adm_request_hist.flg_compulsory%TYPE DEFAULT NULL,
        id_compulsory_reason_in IN adm_request_hist.id_compulsory_reason%TYPE DEFAULT NULL,
        compulsory_reason_in    IN adm_request_hist.compulsory_reason%TYPE DEFAULT NULL,
        handle_error_in         IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        upd_ins(id_adm_request_hist_in,
                id_adm_request_in,
                id_adm_indication_in,
                id_dest_episode_in,
                id_dest_prof_in,
                id_dest_inst_in,
                id_department_in,
                id_dep_clin_serv_in,
                id_room_type_in,
                id_pref_room_in,
                id_admission_type_in,
                expected_duration_in,
                id_adm_preparation_in,
                flg_mixed_nursing_in,
                id_bed_type_in,
                dt_admission_in,
                flg_nit_in,
                dt_nit_suggested_in,
                id_nit_dcs_in,
                id_nit_req_in,
                notes_in,
                flg_status_in,
                id_upd_episode_in,
                id_upd_prof_in,
                dt_upd_in,
                id_upd_inst_in,
                create_user_in,
                create_time_in,
                create_institution_in,
                update_user_in,
                update_time_in,
                update_institution_in,
                flg_regim_in,
                flg_benefi_in,
                flg_precauc_in,
                flg_contact_in,
                flg_compulsory_in,
                id_compulsory_reason_in,
                compulsory_reason_in,
                handle_error_in,
                rows_out);
    END upd_ins;

    --Update by record (with rows_out)
    PROCEDURE upd
    (
        rec_in          IN adm_request_hist%ROWTYPE,
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        IN OUT table_varchar
    ) IS
    BEGIN
        upd(id_adm_request_hist_in  => rec_in.id_adm_request_hist,
            id_adm_request_in       => rec_in.id_adm_request,
            id_adm_indication_in    => rec_in.id_adm_indication,
            id_dest_episode_in      => rec_in.id_dest_episode,
            id_dest_prof_in         => rec_in.id_dest_prof,
            id_dest_inst_in         => rec_in.id_dest_inst,
            id_department_in        => rec_in.id_department,
            id_dep_clin_serv_in     => rec_in.id_dep_clin_serv,
            id_room_type_in         => rec_in.id_room_type,
            id_pref_room_in         => rec_in.id_pref_room,
            id_admission_type_in    => rec_in.id_admission_type,
            expected_duration_in    => rec_in.expected_duration,
            id_adm_preparation_in   => rec_in.id_adm_preparation,
            flg_mixed_nursing_in    => rec_in.flg_mixed_nursing,
            id_bed_type_in          => rec_in.id_bed_type,
            dt_admission_in         => rec_in.dt_admission,
            flg_nit_in              => rec_in.flg_nit,
            dt_nit_suggested_in     => rec_in.dt_nit_suggested,
            id_nit_dcs_in           => rec_in.id_nit_dcs,
            id_nit_req_in           => rec_in.id_nit_req,
            notes_in                => rec_in.notes,
            flg_status_in           => rec_in.flg_status,
            id_upd_episode_in       => rec_in.id_upd_episode,
            id_upd_prof_in          => rec_in.id_upd_prof,
            dt_upd_in               => rec_in.dt_upd,
            id_upd_inst_in          => rec_in.id_upd_inst,
            create_user_in          => rec_in.create_user,
            create_time_in          => rec_in.create_time,
            create_institution_in   => rec_in.create_institution,
            update_user_in          => rec_in.update_user,
            update_time_in          => rec_in.update_time,
            update_institution_in   => rec_in.update_institution,
            flg_regim_in            => rec_in.flg_regim,
            flg_benefi_in           => rec_in.flg_benefi,
            flg_precauc_in          => rec_in.flg_precauc,
            flg_contact_in          => rec_in.flg_contact,
            flg_compulsory_in       => rec_in.flg_compulsory,
            id_compulsory_reason_in => rec_in.id_compulsory_reason,
            compulsory_reason_in    => rec_in.compulsory_reason,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END upd;

    --Update by record (without rows_out)
    PROCEDURE upd
    (
        rec_in          IN adm_request_hist%ROWTYPE,
        handle_error_in IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        upd(id_adm_request_hist_in  => rec_in.id_adm_request_hist,
            id_adm_request_in       => rec_in.id_adm_request,
            id_adm_indication_in    => rec_in.id_adm_indication,
            id_dest_episode_in      => rec_in.id_dest_episode,
            id_dest_prof_in         => rec_in.id_dest_prof,
            id_dest_inst_in         => rec_in.id_dest_inst,
            id_department_in        => rec_in.id_department,
            id_dep_clin_serv_in     => rec_in.id_dep_clin_serv,
            id_room_type_in         => rec_in.id_room_type,
            id_pref_room_in         => rec_in.id_pref_room,
            id_admission_type_in    => rec_in.id_admission_type,
            expected_duration_in    => rec_in.expected_duration,
            id_adm_preparation_in   => rec_in.id_adm_preparation,
            flg_mixed_nursing_in    => rec_in.flg_mixed_nursing,
            id_bed_type_in          => rec_in.id_bed_type,
            dt_admission_in         => rec_in.dt_admission,
            flg_nit_in              => rec_in.flg_nit,
            dt_nit_suggested_in     => rec_in.dt_nit_suggested,
            id_nit_dcs_in           => rec_in.id_nit_dcs,
            id_nit_req_in           => rec_in.id_nit_req,
            notes_in                => rec_in.notes,
            flg_status_in           => rec_in.flg_status,
            id_upd_episode_in       => rec_in.id_upd_episode,
            id_upd_prof_in          => rec_in.id_upd_prof,
            dt_upd_in               => rec_in.dt_upd,
            id_upd_inst_in          => rec_in.id_upd_inst,
            create_user_in          => rec_in.create_user,
            create_time_in          => rec_in.create_time,
            create_institution_in   => rec_in.create_institution,
            update_user_in          => rec_in.update_user,
            update_time_in          => rec_in.update_time,
            update_institution_in   => rec_in.update_institution,
            flg_regim_in            => rec_in.flg_regim,
            flg_benefi_in           => rec_in.flg_benefi,
            flg_precauc_in          => rec_in.flg_precauc,
            flg_contact_in          => rec_in.flg_contact,
            flg_compulsory_in       => rec_in.flg_compulsory,
            id_compulsory_reason_in => rec_in.id_compulsory_reason,
            compulsory_reason_in    => rec_in.compulsory_reason,
            handle_error_in         => handle_error_in,
            rows_out                => rows_out);
    END upd;

    --Update with collection (with rows_out)
    PROCEDURE upd
    (
        col_in            IN adm_request_hist_tc,
        ignore_if_null_in IN BOOLEAN := TRUE,
        handle_error_in   IN BOOLEAN := TRUE,
        rows_out          IN OUT table_varchar
    ) IS
        l_id_adm_request_hist  id_adm_request_hist_cc;
        l_id_adm_request       id_adm_request_cc;
        l_id_adm_indication    id_adm_indication_cc;
        l_id_dest_episode      id_dest_episode_cc;
        l_id_dest_prof         id_dest_prof_cc;
        l_id_dest_inst         id_dest_inst_cc;
        l_id_department        id_department_cc;
        l_id_dep_clin_serv     id_dep_clin_serv_cc;
        l_id_room_type         id_room_type_cc;
        l_id_pref_room         id_pref_room_cc;
        l_id_admission_type    id_admission_type_cc;
        l_expected_duration    expected_duration_cc;
        l_id_adm_preparation   id_adm_preparation_cc;
        l_flg_mixed_nursing    flg_mixed_nursing_cc;
        l_id_bed_type          id_bed_type_cc;
        l_dt_admission         dt_admission_cc;
        l_flg_nit              flg_nit_cc;
        l_dt_nit_suggested     dt_nit_suggested_cc;
        l_id_nit_dcs           id_nit_dcs_cc;
        l_id_nit_req           id_nit_req_cc;
        l_notes                notes_cc;
        l_flg_status           flg_status_cc;
        l_id_upd_episode       id_upd_episode_cc;
        l_id_upd_prof          id_upd_prof_cc;
        l_dt_upd               dt_upd_cc;
        l_id_upd_inst          id_upd_inst_cc;
        l_create_user          create_user_cc;
        l_create_time          create_time_cc;
        l_create_institution   create_institution_cc;
        l_update_user          update_user_cc;
        l_update_time          update_time_cc;
        l_update_institution   update_institution_cc;
        l_flg_regim            flg_regim_cc;
        l_flg_benefi           flg_benefi_cc;
        l_flg_precauc          flg_precauc_cc;
        l_flg_contact          flg_contact_cc;
        l_flg_compulsory       flg_compulsory_cc;
        l_id_compulsory_reason id_compulsory_reason_cc;
        l_compulsory_reason    compulsory_reason_cc;
    BEGIN
        FOR i IN col_in.first .. col_in.last
        LOOP
            l_id_adm_request_hist(i) := col_in(i).id_adm_request_hist;
            l_id_adm_request(i) := col_in(i).id_adm_request;
            l_id_adm_indication(i) := col_in(i).id_adm_indication;
            l_id_dest_episode(i) := col_in(i).id_dest_episode;
            l_id_dest_prof(i) := col_in(i).id_dest_prof;
            l_id_dest_inst(i) := col_in(i).id_dest_inst;
            l_id_department(i) := col_in(i).id_department;
            l_id_dep_clin_serv(i) := col_in(i).id_dep_clin_serv;
            l_id_room_type(i) := col_in(i).id_room_type;
            l_id_pref_room(i) := col_in(i).id_pref_room;
            l_id_admission_type(i) := col_in(i).id_admission_type;
            l_expected_duration(i) := col_in(i).expected_duration;
            l_id_adm_preparation(i) := col_in(i).id_adm_preparation;
            l_flg_mixed_nursing(i) := col_in(i).flg_mixed_nursing;
            l_id_bed_type(i) := col_in(i).id_bed_type;
            l_dt_admission(i) := col_in(i).dt_admission;
            l_flg_nit(i) := col_in(i).flg_nit;
            l_dt_nit_suggested(i) := col_in(i).dt_nit_suggested;
            l_id_nit_dcs(i) := col_in(i).id_nit_dcs;
            l_id_nit_req(i) := col_in(i).id_nit_req;
            l_notes(i) := col_in(i).notes;
            l_flg_status(i) := col_in(i).flg_status;
            l_id_upd_episode(i) := col_in(i).id_upd_episode;
            l_id_upd_prof(i) := col_in(i).id_upd_prof;
            l_dt_upd(i) := col_in(i).dt_upd;
            l_id_upd_inst(i) := col_in(i).id_upd_inst;
            l_create_user(i) := col_in(i).create_user;
            l_create_time(i) := col_in(i).create_time;
            l_create_institution(i) := col_in(i).create_institution;
            l_update_user(i) := col_in(i).update_user;
            l_update_time(i) := col_in(i).update_time;
            l_update_institution(i) := col_in(i).update_institution;
            l_flg_regim(i) := col_in(i).flg_regim;
            l_flg_benefi(i) := col_in(i).flg_benefi;
            l_flg_precauc(i) := col_in(i).flg_precauc;
            l_flg_contact(i) := col_in(i).flg_contact;
            l_flg_compulsory(i) := col_in(i).flg_compulsory;
            l_id_compulsory_reason(i) := col_in(i).id_compulsory_reason;
            l_compulsory_reason(i) := col_in(i).compulsory_reason;
        END LOOP;
        IF nvl(ignore_if_null_in, FALSE)
        THEN
            -- Set any columns to their current values
            -- if incoming value is NULL.
            -- Put WHEN clause on column-level triggers!
            FORALL i IN col_in.first .. col_in.last
                UPDATE adm_request_hist
                   SET id_adm_request       = nvl(l_id_adm_request(i), id_adm_request),
                       id_adm_indication    = nvl(l_id_adm_indication(i), id_adm_indication),
                       id_dest_episode      = nvl(l_id_dest_episode(i), id_dest_episode),
                       id_dest_prof         = nvl(l_id_dest_prof(i), id_dest_prof),
                       id_dest_inst         = nvl(l_id_dest_inst(i), id_dest_inst),
                       id_department        = nvl(l_id_department(i), id_department),
                       id_dep_clin_serv     = nvl(l_id_dep_clin_serv(i), id_dep_clin_serv),
                       id_room_type         = nvl(l_id_room_type(i), id_room_type),
                       id_pref_room         = nvl(l_id_pref_room(i), id_pref_room),
                       id_admission_type    = nvl(l_id_admission_type(i), id_admission_type),
                       expected_duration    = nvl(l_expected_duration(i), expected_duration),
                       id_adm_preparation   = nvl(l_id_adm_preparation(i), id_adm_preparation),
                       flg_mixed_nursing    = nvl(l_flg_mixed_nursing(i), flg_mixed_nursing),
                       id_bed_type          = nvl(l_id_bed_type(i), id_bed_type),
                       dt_admission         = nvl(l_dt_admission(i), dt_admission),
                       flg_nit              = nvl(l_flg_nit(i), flg_nit),
                       dt_nit_suggested     = nvl(l_dt_nit_suggested(i), dt_nit_suggested),
                       id_nit_dcs           = nvl(l_id_nit_dcs(i), id_nit_dcs),
                       id_nit_req           = nvl(l_id_nit_req(i), id_nit_req),
                       notes                = nvl(l_notes(i), notes),
                       flg_status           = nvl(l_flg_status(i), flg_status),
                       id_upd_episode       = nvl(l_id_upd_episode(i), id_upd_episode),
                       id_upd_prof          = nvl(l_id_upd_prof(i), id_upd_prof),
                       dt_upd               = nvl(l_dt_upd(i), dt_upd),
                       id_upd_inst          = nvl(l_id_upd_inst(i), id_upd_inst),
                       create_user          = nvl(l_create_user(i), create_user),
                       create_time          = nvl(l_create_time(i), create_time),
                       create_institution   = nvl(l_create_institution(i), create_institution),
                       update_user          = nvl(l_update_user(i), update_user),
                       update_time          = nvl(l_update_time(i), update_time),
                       update_institution   = nvl(l_update_institution(i), update_institution),
                       flg_regim            = nvl(l_flg_regim(i), flg_regim),
                       flg_benefi           = nvl(l_flg_benefi(i), flg_benefi),
                       flg_precauc          = nvl(l_flg_precauc(i), flg_precauc),
                       flg_contact          = nvl(l_flg_contact(i), flg_contact),
                       flg_compulsory       = nvl(l_flg_compulsory(i), flg_compulsory),
                       id_compulsory_reason = nvl(l_id_compulsory_reason(i), id_compulsory_reason),
                       compulsory_reason    = nvl(l_compulsory_reason(i), compulsory_reason)
                 WHERE id_adm_request_hist = l_id_adm_request_hist(i)
                RETURNING ROWID BULK COLLECT INTO rows_out;
        ELSE
            FORALL i IN col_in.first .. col_in.last
                UPDATE adm_request_hist
                   SET id_adm_request       = l_id_adm_request(i),
                       id_adm_indication    = l_id_adm_indication(i),
                       id_dest_episode      = l_id_dest_episode(i),
                       id_dest_prof         = l_id_dest_prof(i),
                       id_dest_inst         = l_id_dest_inst(i),
                       id_department        = l_id_department(i),
                       id_dep_clin_serv     = l_id_dep_clin_serv(i),
                       id_room_type         = l_id_room_type(i),
                       id_pref_room         = l_id_pref_room(i),
                       id_admission_type    = l_id_admission_type(i),
                       expected_duration    = l_expected_duration(i),
                       id_adm_preparation   = l_id_adm_preparation(i),
                       flg_mixed_nursing    = l_flg_mixed_nursing(i),
                       id_bed_type          = l_id_bed_type(i),
                       dt_admission         = l_dt_admission(i),
                       flg_nit              = l_flg_nit(i),
                       dt_nit_suggested     = l_dt_nit_suggested(i),
                       id_nit_dcs           = l_id_nit_dcs(i),
                       id_nit_req           = l_id_nit_req(i),
                       notes                = l_notes(i),
                       flg_status           = l_flg_status(i),
                       id_upd_episode       = l_id_upd_episode(i),
                       id_upd_prof          = l_id_upd_prof(i),
                       dt_upd               = l_dt_upd(i),
                       id_upd_inst          = l_id_upd_inst(i),
                       create_user          = l_create_user(i),
                       create_time          = l_create_time(i),
                       create_institution   = l_create_institution(i),
                       update_user          = l_update_user(i),
                       update_time          = l_update_time(i),
                       update_institution   = l_update_institution(i),
                       flg_regim            = l_flg_regim(i),
                       flg_benefi           = l_flg_benefi(i),
                       flg_precauc          = l_flg_precauc(i),
                       flg_contact          = l_flg_contact(i),
                       flg_compulsory       = l_flg_compulsory(i),
                       id_compulsory_reason = l_id_compulsory_reason(i),
                       compulsory_reason    = l_compulsory_reason(i)
                 WHERE id_adm_request_hist = l_id_adm_request_hist(i)
                RETURNING ROWID BULK COLLECT INTO rows_out;
        END IF;
    
    EXCEPTION
        WHEN e_forall_error THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                FOR indx IN 1 .. SQL%bulk_exceptions.count
                LOOP
                    pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
                END LOOP;
            END IF;
        WHEN OTHERS THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END upd;

    --Update with collection (without rows_out)
    PROCEDURE upd
    (
        col_in            IN adm_request_hist_tc,
        ignore_if_null_in IN BOOLEAN := TRUE,
        handle_error_in   IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        upd(col_in, ignore_if_null_in, handle_error_in, rows_out);
    END upd;

    --Dynamic update string
    FUNCTION dynupdstr
    (
        colname_in IN all_tab_columns.column_name%TYPE,
        where_in   IN VARCHAR2 := NULL
    ) RETURN VARCHAR2 IS
    BEGIN
        RETURN 'BEGIN UPDATE adm_request_hist
SET ' || colname_in || ' = :value
 WHERE ' || nvl(where_in, '1=1') || ' RETURNING ROWID BULK COLLECT INTO :rows_out; END;';
    END dynupdstr;

    -- Use Native Dynamic SQL increment a single NUMBER column
    -- for all rows specified by the dynamic WHERE clause (with rows_out)
    PROCEDURE increment_onecol
    (
        colname_in         IN all_tab_columns.column_name%TYPE,
        where_in           IN VARCHAR2,
        increment_value_in IN NUMBER DEFAULT 1,
        handle_error_in    IN BOOLEAN := TRUE,
        rows_out           OUT table_varchar
    ) IS
    BEGIN
        EXECUTE IMMEDIATE 'BEGIN UPDATE adm_request_hist
SET ' || colname_in || '=' || colname_in || '+' || nvl(increment_value_in, 1) || ' WHERE ' ||
                          nvl(where_in, '1=1') || ' RETURNING ROWID BULK COLLECT INTO :rows_out; END;'
            USING OUT rows_out;
    END increment_onecol;

    -- Use Native Dynamic SQL increment a single NUMBER column
    -- for all rows specified by the dynamic WHERE clause (without rows_out)
    PROCEDURE increment_onecol
    (
        colname_in         IN all_tab_columns.column_name%TYPE,
        where_in           IN VARCHAR2,
        increment_value_in IN NUMBER DEFAULT 1,
        handle_error_in    IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        EXECUTE IMMEDIATE 'UPDATE adm_request_hist
SET ' || colname_in || '=' || colname_in || '+' || nvl(increment_value_in, 1) || ' WHERE ' ||
                          nvl(where_in, '1=1');
    END increment_onecol;

    -- Delete one row by primary key
    PROCEDURE del
    (
        id_adm_request_hist_in IN adm_request_hist.id_adm_request_hist%TYPE,
        handle_error_in        IN BOOLEAN := TRUE,
        rows_out               OUT table_varchar
    ) IS
    BEGIN
        DELETE FROM adm_request_hist
         WHERE id_adm_request_hist = id_adm_request_hist_in
        RETURNING ROWID BULK COLLECT INTO rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END del;

    -- Delete one row by primary key
    PROCEDURE del
    (
        id_adm_request_hist_in IN adm_request_hist.id_adm_request_hist%TYPE,
        handle_error_in        IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        del(id_adm_request_hist_in => id_adm_request_hist_in, handle_error_in => handle_error_in, rows_out => rows_out);
    END del;

    -- Delete all rows for this AREQH_AREQ_FK foreign key value
    PROCEDURE del_areqh_areq_fk
    (
        id_adm_request_in IN adm_request_hist.id_adm_request%TYPE,
        handle_error_in   IN BOOLEAN := TRUE,
        rows_out          OUT table_varchar
    ) IS
    BEGIN
        DELETE FROM adm_request_hist
         WHERE id_adm_request = id_adm_request_in
        RETURNING ROWID BULK COLLECT INTO rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END del_areqh_areq_fk;

    -- Delete all rows for this AREQH_AREQ_FK foreign key value
    PROCEDURE del_areqh_areq_fk
    (
        id_adm_request_in IN adm_request_hist.id_adm_request%TYPE,
        handle_error_in   IN BOOLEAN := TRUE
    ) IS
        rows_out table_varchar;
    BEGIN
        del_areqh_areq_fk(id_adm_request_in => id_adm_request_in,
                          handle_error_in   => handle_error_in,
                          rows_out          => rows_out);
    END del_areqh_areq_fk;

    -- Deletions using dynamic SQL
    FUNCTION dyndelstr(where_in IN VARCHAR2) RETURN VARCHAR2 IS
    BEGIN
        IF where_in IS NULL
        THEN
            RETURN 'DELETE FROM adm_request_hist';
        ELSE
            RETURN 'DELETE FROM adm_request_hist WHERE ' || where_in;
        END IF;
    END dyndelstr;
    -- Delete all rows specified by dynamic WHERE clause
    PROCEDURE del_by
    (
        where_clause_in IN VARCHAR2,
        handle_error_in IN BOOLEAN := TRUE,
        rows_out        OUT table_varchar
    ) IS
    BEGIN
        EXECUTE IMMEDIATE 'BEGIN ' || dyndelstr(where_clause_in) ||
                          ' RETURNING ROWID BULK COLLECT INTO :rows_out; END;'
            USING OUT rows_out;
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END del_by;

    -- Delete all rows specified by dynamic WHERE clause
    PROCEDURE del_by
    (
        where_clause_in IN VARCHAR2,
        handle_error_in IN BOOLEAN := TRUE
    ) IS
    BEGIN
        EXECUTE IMMEDIATE dyndelstr(where_clause_in);
    
    EXCEPTION
        WHEN e_null_column_value
             OR e_existing_fky_reference
             OR e_check_constraint_failure
             OR e_no_parent_key
             OR e_child_record_found
             OR e_forall_error
             OR e_integ_constraint_failure THEN
            IF NOT handle_error_in
            THEN
                RAISE;
            ELSE
                pk_alertlog.log_info('DML error ignored: ' || SQLCODE || ': ' || SQLERRM);
            END IF;
        
    END del_by;

    -- Initialize a record with default values for columns in the table (prc)
    PROCEDURE initrec(adm_request_hist_inout IN OUT adm_request_hist%ROWTYPE) IS
    BEGIN
        adm_request_hist_inout.id_adm_request_hist  := NULL;
        adm_request_hist_inout.id_adm_request       := NULL;
        adm_request_hist_inout.id_adm_indication    := NULL;
        adm_request_hist_inout.id_dest_episode      := NULL;
        adm_request_hist_inout.id_dest_prof         := NULL;
        adm_request_hist_inout.id_dest_inst         := NULL;
        adm_request_hist_inout.id_department        := NULL;
        adm_request_hist_inout.id_dep_clin_serv     := NULL;
        adm_request_hist_inout.id_room_type         := NULL;
        adm_request_hist_inout.id_pref_room         := NULL;
        adm_request_hist_inout.id_admission_type    := NULL;
        adm_request_hist_inout.expected_duration    := NULL;
        adm_request_hist_inout.id_adm_preparation   := NULL;
        adm_request_hist_inout.flg_mixed_nursing    := NULL;
        adm_request_hist_inout.id_bed_type          := NULL;
        adm_request_hist_inout.dt_admission         := NULL;
        adm_request_hist_inout.flg_nit              := NULL;
        adm_request_hist_inout.dt_nit_suggested     := NULL;
        adm_request_hist_inout.id_nit_dcs           := NULL;
        adm_request_hist_inout.id_nit_req           := NULL;
        adm_request_hist_inout.notes                := NULL;
        adm_request_hist_inout.flg_status           := NULL;
        adm_request_hist_inout.id_upd_episode       := NULL;
        adm_request_hist_inout.id_upd_prof          := NULL;
        adm_request_hist_inout.dt_upd               := NULL;
        adm_request_hist_inout.id_upd_inst          := NULL;
        adm_request_hist_inout.create_user          := NULL;
        adm_request_hist_inout.create_time          := NULL;
        adm_request_hist_inout.create_institution   := NULL;
        adm_request_hist_inout.update_user          := NULL;
        adm_request_hist_inout.update_time          := NULL;
        adm_request_hist_inout.update_institution   := NULL;
        adm_request_hist_inout.flg_regim            := NULL;
        adm_request_hist_inout.flg_benefi           := NULL;
        adm_request_hist_inout.flg_precauc          := NULL;
        adm_request_hist_inout.flg_contact          := NULL;
        adm_request_hist_inout.flg_compulsory       := NULL;
        adm_request_hist_inout.id_compulsory_reason := NULL;
        adm_request_hist_inout.compulsory_reason    := NULL;
    END initrec;

    -- Initialize a record with default values for columns in the table (fnc)
    FUNCTION initrec RETURN adm_request_hist%ROWTYPE IS
        l_adm_request_hist adm_request_hist%ROWTYPE;
    BEGIN
        RETURN l_adm_request_hist;
    END initrec;

    --get data from rowid
    FUNCTION get_data_rowid(rows_in IN table_varchar) RETURN adm_request_hist_tc IS
        data adm_request_hist_tc;
    BEGIN
        SELECT *
          BULK COLLECT
          INTO data
          FROM adm_request_hist
         WHERE ROWID IN (SELECT /*+opt_estimate(table,t,scale_rows=0.0000001))*/
                          *
                           FROM TABLE(rows_in) t);
        RETURN data;
    END get_data_rowid;

    --get data from rowid (pragma autonomous transacion)
    FUNCTION get_data_rowid_pat(rows_in IN table_varchar) RETURN adm_request_hist_tc IS
        data adm_request_hist_tc;
        PRAGMA AUTONOMOUS_TRANSACTION;
    BEGIN
        data := get_data_rowid(rows_in);
        COMMIT;
        RETURN data;
    
    EXCEPTION
        WHEN OTHERS THEN
            pk_alert_exceptions.raise_error(error_name_in => 'get_data_rowid_pat');
            ROLLBACK;
        
    END get_data_rowid_pat;

BEGIN
    NULL;
END ts_adm_request_hist;
/
