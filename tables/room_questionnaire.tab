-- CHANGED BY: MARCO FREIRE
-- CHANGE DATE: 16/06/2010 16:00
-- CHANGE REASON: [ALERT-27380] 

CREATE TABLE ROOM_QUESTIONNAIRE
   (ID_ROOM_QUESTIONNAIRE NUMBER(24) NOT NULL ENABLE,
    ID_QUESTIONNAIRE NUMBER(24) NOT NULL ENABLE,
	ID_ROOM	NUMBER(24) NOT NULL ENABLE,
	FLG_ACTIVE VARCHAR2(1 CHAR) NOT NULL ENABLE,
	--
	CREATE_USER            VARCHAR2(24 CHAR),
    CREATE_TIME            TIMESTAMP(6) WITH LOCAL TIME ZONE,
    CREATE_INSTITUTION     NUMBER(24),
    UPDATE_USER            VARCHAR2(24 CHAR),
    UPDATE_TIME            TIMESTAMP(6) WITH LOCAL TIME ZONE,
    UPDATE_INSTITUTION     NUMBER(24)
   );

   
   COMMENT ON TABLE ROOM_QUESTIONNAIRE IS 'Tabela de parametrização de questões por laboratório' ;

   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.ID_ROOM_QUESTIONNAIRE IS 'Chave primária' ;
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.ID_QUESTIONNAIRE IS 'Idenficador da questão' ;
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.ID_ROOM IS 'Identificador do laboratório' ;
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.FLG_ACTIVE IS 'Identificador de validade do registo' ;
   --
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.create_user            IS 'Professional that created the entry';
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.create_time            IS 'Date of the entry creation';
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.create_institution     IS 'Id of the institution where the entry was created';
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.update_user            IS 'Last professional that updated the entry';
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.update_time            IS 'Date of the last update to the entry';  
   COMMENT ON COLUMN ROOM_QUESTIONNAIRE.update_institution     IS 'Id of the last institution where the entry was updated';
   
-- CHANGED END: MARCO FREIRE   

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 18/12/2012 12:32
-- CHANGE REASON: [ALERT-247638] 
COMMENT ON TABLE ROOM_QUESTIONNAIRE IS 'Table that defines the questionnaires for each room';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 09/10/2013 10:05
-- CHANGE REASON: [ALERT-266573] 
ALTER TABLE ROOM_QUESTIONNAIRE 
 ADD (ID_ANALYSIS_QUESTIONNAIRE NUMBER(24)
 ,ID_ANALYSIS_ROOM NUMBER(24)
 ,FLG_ADD_REMOVE VARCHAR2(1))
 MODIFY (ID_QUESTIONNAIRE NUMBER(24) NULL
 ,ID_ROOM NUMBER(24) NULL);

COMMENT ON COLUMN ROOM_QUESTIONNAIRE.ID_ANALYSIS_QUESTIONNAIRE IS 'Analysis questionnaire ID';
COMMENT ON COLUMN ROOM_QUESTIONNAIRE.ID_ANALYSIS_ROOM IS 'Analysis room ID';
COMMENT ON COLUMN ROOM_QUESTIONNAIRE.FLG_ADD_REMOVE IS 'Flag that indicates if the record is to be shown or not';
 
-- CHANGE END: Ana Matos