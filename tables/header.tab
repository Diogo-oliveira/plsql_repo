-- CHANGED BY: Eduardo Lourenco
-- CHANGE DATE: 29/05/2009 19:12
-- CHANGE REASON: [ALERT-10700] New header in the application
CREATE TABLE HEADER
 (ID_HEADER NUMBER(24) NOT NULL
 ,INTERNAL_NAME VARCHAR2(32) NOT NULL
 ,INTERNAL_DESC VARCHAR2(240) NOT NULL
 ,XML_FORMAT CLOB NOT NULL
 ,FLG_SCREEN_MODE VARCHAR2(1) NOT NULL
 );
COMMENT ON TABLE HEADER IS 'Holds all the Headers and defines how each header will be built';
COMMENT ON COLUMN HEADER.ID_HEADER IS 'Header Id';
COMMENT ON COLUMN HEADER.INTERNAL_NAME IS 'Internal name';
COMMENT ON COLUMN HEADER.INTERNAL_DESC IS 'Internal description';
COMMENT ON COLUMN HEADER.XML_FORMAT IS 'Format of the Header in XML';
COMMENT ON COLUMN HEADER.FLG_SCREEN_MODE IS 'Screen mode this header applies to. N-Normal F-Fullscreen';
ALTER TABLE HEADER ADD 
  ( CREATE_USER VARCHAR2(24),
    CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
    CREATE_INSTITUTION NUMBER(24),
    UPDATE_USER VARCHAR2(24),
    UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
    UPDATE_INSTITUTION NUMBER(24));
COMMENT ON COLUMN HEADER.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN HEADER.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN HEADER.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN HEADER.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN HEADER.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN HEADER.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Eduardo Lourenco

-- CHANGED BY: Pedro Henriques
-- CHANGE DATE: 09/07/2018 11:31
-- CHANGE REASON: [EMR-4796] 
DECLARE l_sql VARCHAR2(1000 CHAR);
BEGIN
    l_sql := 'ALTER TABLE alert.header move lob(xml_format) store AS (tablespace alert_lob)';
    pk_versioning.run(l_sql);
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
-- CHANGE END: Pedro Henriques