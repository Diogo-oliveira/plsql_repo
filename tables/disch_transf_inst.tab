-- CHANGED BY: Pedro Teixeira
-- CHANGE DATE: 25/03/2010 09:31
-- CHANGE REASON: [ALERT-83163] 
CREATE TABLE DISCH_TRANSF_INST
(
   ID_DISCH_TRANSF_INSTNUMBER(24) NOT NULL ENABLE,
   ID_DISCHARGENUMBER(24) NOT NULL ENABLE,
   ID_DISCH_DEST_INSTNUMBER(24),
   RANKNUMBER(6),
   FLG_STATUSVARCHAR2(1 CHAR) NOT NULL ENABLE,
   ID_PROF_CREATENUMBER(24) NOT NULL ENABLE,
   ID_PROF_UPDATENUMBER(24),
   DT_CREATETIMESTAMP(6) WITH LOCAL TIME ZONE NOT NULL ENABLE,
   DT_UPDATETIMESTAMP(6) WITH LOCAL TIME ZONE,
   FREE_TEXT_INSTVARCHAR2(2000 CHAR),
   FLG_TYPEVARCHAR2(1 CHAR),
   NOTESVARCHAR2(4000 CHAR),
   ID_REFUSED_REASONNUMBER(24),
   FLG_GRANTED_TRANSPORT VARCHAR2(1 CHAR),
   CREATE_USERVARCHAR2(24 CHAR),
   CREATE_TIMETIMESTAMP(6) WITH LOCAL TIME ZONE,
   CREATE_INSTITUTIONNUMBER(24),
   UPDATE_USERVARCHAR2(24 CHAR),
   UPDATE_TIMETIMESTAMP(6) WITH LOCAL TIME ZONE,
   UPDATE_INSTITUTIONNUMBER(24)
);

COMMENT ON TABLE DISCH_DEST_INST IS 'Table relating DISCH_DEST_INST and DISCHARGE. Used for maintaining the states of transfer institutions and the related discharge.';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_DISCH_TRANSF_INST IS 'Primary key';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_DISCHARGE IS 'FK for table DISCHARGE';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_DISCH_DEST_INST IS 'FK for table DISCH_DEST_INST';
COMMENT ON COLUMN DISCH_TRANSF_INST.RANK IS 'Rank';
COMMENT ON COLUMN DISCH_TRANSF_INST.FLG_STATUS IS 'Record status ? C: concluded, P: pending, R: refused, D: canceled, S: Suggested, N: not available';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_PROF_CREATE IS 'Professional ID responsible for institution selection';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_PROF_UPDATE IS 'Professional ID responsible for transf. State change';
COMMENT ON COLUMN DISCH_TRANSF_INST.DT_CREATE IS 'Creation Date';
COMMENT ON COLUMN DISCH_TRANSF_INST.DT_UPDATE IS 'State change last date';
COMMENT ON COLUMN DISCH_TRANSF_INST.FREE_TEXT_INST IS 'Institution manually inserted as free text (for situation where none is parameterized)';
COMMENT ON COLUMN DISCH_TRANSF_INST.FLG_TYPE IS 'TRANSF_INST Type - I: insitutional, T: free text';
COMMENT ON COLUMN DISCH_TRANSF_INST.NOTES IS 'Record notes';
COMMENT ON COLUMN DISCH_TRANSF_INST.ID_REFUSED_REASON IS 'Refuse reason connected with CANCEL_REASON';
COMMENT ON COLUMN DISCH_TRANSF_INST.FLG_GRANTED_TRANSPORT IS 'Flag indicating if transportations is granted';
COMMENT ON COLUMN DISCH_TRANSF_INST.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN DISCH_TRANSF_INST.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN DISCH_TRANSF_INST.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN DISCH_TRANSF_INST.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN DISCH_TRANSF_INST.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN DISCH_TRANSF_INST.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Pedro Teixeira

-- CHANGED BY: Pedro Teixeira
-- CHANGE DATE: 19/01/2011 12:39
-- CHANGE REASON: [ALERT-156485] 
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE alert.disch_transf_inst add CONSTRAINT dti_pk primary key(id_disch_transf_inst) USING INDEX tablespace INDEX_M';
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
-- CHANGE END: Pedro Teixeira

-- CHANGED BY: Elisabete Bugalho
-- CHANGE DATE: 19/01/2016 09:25
-- CHANGE REASON: [ALERT-317933] Database model documentation and comments corretions
--                
-- Add comments to the table 
comment on table DISCH_TRANSF_INST
  is 'Discharge to other institution';  
-- CHANGE END: Elisabete Bugalho