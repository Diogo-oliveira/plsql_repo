  CREATE TABLE GRID_TASK_OTH_EXM
   (	ID_EXAM_REQ NUMBER(24,0),
	ID_EXAM_REQ_DET NUMBER(24,0),
	GENDER VARCHAR2(1),
	ID_PATIENT NUMBER(24,0),
	ID_EPISODE NUMBER(24,0),
	FLG_STATUS_EPIS VARCHAR2(1),
	ID_CLINICAL_SERVICE NUMBER(12,0),
	ID_DEPT NUMBER(24,0),
	ID_SCHEDULE NUMBER(24,0),
	DT_FIRST_OBS VARCHAR2(30),
	RANK NUMBER,
	NUM_CLIN_RECORD VARCHAR2(12),
	NICK_NAME VARCHAR2(200),
	DT_BEGIN_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
	ID_EXAM NUMBER(12,0),
	FLG_STATUS_REQ_DET VARCHAR2(1),
	ID_EXAM_CAT NUMBER(24,0),
	FLG_AVAILABLE VARCHAR2(1),
	ACUITY VARCHAR2(30),
	RANK_ACUITY VARCHAR2(30),
	COLOR VARCHAR2(30),
	PAT_AGE NUMBER(12,0),
	FLG_RESULT VARCHAR2(1),
	ID_EPIS_TYPE NUMBER(12,0),
	ID_INSTITUTION NUMBER(24,0),
	ID_SOFTWARE NUMBER(24,0)
   ) ;


   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_REQ IS 'Cabeçalho da requisição';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_REQ_DET IS 'Detalhe da requisição';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.GENDER IS 'Sexo. F - feminino, M - masculino, NULL - deconhecido, I - indeterminado';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_PATIENT IS 'Paciente';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EPISODE IS 'Episódio';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_STATUS_EPIS IS 'Estado do episódio';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_CLINICAL_SERVICE IS 'Serviços clínicos';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_DEPT IS 'Departamento';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_SCHEDULE IS 'Agendamento';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_FIRST_OBS IS 'Data da primeira observação';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.RANK IS 'Ordenação';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.NUM_CLIN_RECORD IS 'Nº processo clínico na instituição';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.NICK_NAME IS 'Nome abreviado';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_BEGIN_TSTZ IS 'Data pretendida para início da execução do exame (ie, ñ imediata)';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM IS 'Exame';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_STATUS_REQ_DET IS 'Estado: R - requisitado, E - em execução, F - terminado, T - em transporte, M - transporte terminado, C - cancelado; D - pendente';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_CAT IS 'Categoria de Exame';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_AVAILABLE IS 'Disponibilidade do registo na instituição onde está instalada a BD';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ACUITY IS 'Acuidade';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.RANK_ACUITY IS 'Ordenação da acuidade';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.COLOR IS 'Cor';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.PAT_AGE IS 'Idade';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_RESULT IS 'Existem resultados (Y/N)';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EPIS_TYPE IS 'Tipo de episódio';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_INSTITUTION IS 'Instituição';
   COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_SOFTWARE IS 'Software';
   COMMENT ON TABLE GRID_TASK_OTH_EXM  IS 'Tabela auxiliar para a grelha de outros exames';

ALTER TABLE GRID_TASK_OTH_EXM ADD (FLG_TYPE VARCHAR2(1) NOT NULL);
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_TYPE IS 'Tipo de registo A - Análises; E - Exames';

ALTER TABLE GRID_TASK_OTH_EXM MODIFY (ID_CLINICAL_SERVICE NUMBER(12) NULL,ID_SCHEDULE NUMBER(24) NULL);

alter table grid_task_oth_exm modify DT_FIRST_OBS null;

alter table grid_task_oth_exm modify DT_BEGIN_TSTZ null;


ALTER TABLE GRID_TASK_OTH_EXM 
 ADD (ID_PROFESSIONAL NUMBER(24)
 ,FLG_TIME VARCHAR2(1)
 ,DT_REQ_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 );

COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_PROFESSIONAL IS 'Professional''s ID';

COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_TIME IS 'Execution time (N)ext episode, (B)etween episode, in this (E)pisode';

COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_REQ_TSTZ IS 'Request date';



ALTER TABLE GRID_TASK_OTH_EXM
 MODIFY (FLG_STATUS_REQ_DET VARCHAR2(2)
 );
 
ALTER TABLE GRID_TASK_OTH_EXM ADD (DT_SCHEDULE_TSTZ TIMESTAMP WITH LOCAL TIME ZONE);

COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_SCHEDULE_TSTZ IS 'Data sugerida para o agendamento do exame';



-- CHANGED BY: Ana Matos
-- CHANGED DATE: 2009-MAR-27
-- CHANGED REASON: ALERT-645

ALTER TABLE GRID_TASK_OTH_EXM ADD (FLG_CONTACT VARCHAR2(2));

COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_CONTACT IS 'Flag que indica o estado do contacto com o técnico';

-- CHANGE END: Ana Matos


-- CHANGED BY: Ana Matos
-- CHANGED DATE: 2009-ABR-14
-- CHANGED REASON: ALERT-23736

ALTER TABLE GRID_TASK_OTH_EXM 
 MODIFY (NUM_CLIN_RECORD VARCHAR2(100)
 );

-- CHANGE END: Ana Matos




-- CHANGED BY: Gustavo Serrano
-- CHANGE DATE: 07/07/2010 15:50
-- CHANGE REASON: [ALERT-110074] Order sets - TDE
ALTER TABLE GRID_TASK_OTH_EXM ADD (
    ID_TASK_DEPENDENCY NUMBER(24),
    FLG_REQ_ORIGIN_MODULE VARCHAR2(1 CHAR));
    
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_TASK_DEPENDENCY IS 'Task dependency identifier';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_REQ_ORIGIN_MODULE IS 'Request created by : D - Default, O - Order Sets, I - Interfaces';
-- CHANGE END: Gustavo Serrano

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 13/03/2013 10:49
-- CHANGE REASON: [ALERT-253342] 
DECLARE
    e_object_exists EXCEPTION;

    PRAGMA EXCEPTION_INIT(e_object_exists, -01430);
BEGIN
    BEGIN
        EXECUTE IMMEDIATE 'ALTER TABLE GRID_TASK_OTH_EXM ADD (ID_TRIAGE_COLOR NUMBER(12), ID_FAST_TRACK NUMBER(24))';

    EXCEPTION
        WHEN e_object_exists THEN
            dbms_output.put_line('Column already exists');
    END;
END;
/

COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_TRIAGE_COLOR IS 'Triage color id';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_FAST_TRACK IS 'Triggered fast track to this episode';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_ANNOUNCED_ARRIVAL IS 'Announced arrival id';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 08/01/2016 12:01
-- CHANGE REASON: [ALERT-317702] 
COMMENT ON TABLE GRID_TASK_OTH_EXM IS 'Exams technician easy access';

COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_REQ IS 'Order''s ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_REQ_DET IS 'Exam''s order detail ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.GENDER IS 'Patient gender';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_PATIENT IS 'Pacient ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_STATUS_EPIS IS 'Flag that indicates the episode status: A - Active, I - Inactive, C - Canceled, P - Pending';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_CLINICAL_SERVICE IS 'Clinical service ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_DEPT IS 'Dept ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_SCHEDULE IS 'Scheduling ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_FIRST_OBS IS 'Patient first observation date';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.RANK IS 'Rank';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.NUM_CLIN_RECORD IS 'Institution''s clinical record number';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.NICK_NAME IS 'Professional name';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_BEGIN_TSTZ IS 'Date for which the order is to be performed';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM IS 'Exam ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_STATUS_REQ_DET IS 'Flag that indicates the exam''s order detail status';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EXAM_CAT IS 'Exam category ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_AVAILABLE IS 'Flag that indicates if the record is available or not (Y/N)';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ACUITY IS 'Acuity';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.RANK_ACUITY IS 'Rank acuity';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.COLOR IS 'Color';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.PAT_AGE IS 'Patient age';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_RESULT IS 'Flag that indicates if there are results for this order';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_EPIS_TYPE IS 'Episode type ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_INSTITUTION IS 'Institution ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_SOFTWARE IS 'Software ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_TYPE IS 'Flag that indicates the type of record';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_PROFESSIONAL IS 'Professional ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_TIME IS 'To be performed: E - this episode; B - between episodes; N - next episode';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_REQ_TSTZ IS 'Date that indicates when tjhe order was registered';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_SCHEDULE_TSTZ IS 'Date for which the order is to be performed';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_CONTACT IS 'Flag that indicates the contact state';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.DT_SCHEDULE_TSTZ IS 'Suggested date for scheduling';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.UPDATE_INSTITUTION IS 'Update Institution';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_TASK_DEPENDENCY IS 'Task dependency ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.FLG_REQ_ORIGIN_MODULE IS 'Request created by: D - Default, C - Care Plans, O - Order Sets, I - Interfaces; S - Scheduler;  R - Referral';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_ANNOUNCED_ARRIVAL IS 'Announced arrival ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_TRIAGE_COLOR IS 'Triage color ID';
COMMENT ON COLUMN GRID_TASK_OTH_EXM.ID_FAST_TRACK IS 'Fast track ID';
-- CHANGE END: Ana Matos

-- CHANGED BY: Diogo Oliveira
-- CHANGE DATE: 24/02/2021 14:32
-- CHANGE REASON: [EMR-42343] - Change the descriptions of the "Start date" and "Date to be defined" fields.
comment on column GRID_TASK_OTH_EXM.FLG_TIME is 'To be performed: E - this episode; B - before next episode; N - next episode; D - On a defined or to be defined date';
-- CHANGE END: Diogo Oliveira