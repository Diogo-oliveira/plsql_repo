-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 04/05/2012 16:35
-- CHANGE REASON: [ALERT-229222] VERSIONING TRANSACTIONAL MODEL - SCHEMA ALERT - DDL
DECLARE
    e_name_already_exists EXCEPTION;

    PRAGMA EXCEPTION_INIT(e_name_already_exists, -00955);
BEGIN
    --i_flg_category
    --DSV:Dados Desenvolvimento, PRM:Parametrizações, CNT:conteúdos, TRS:Transacionais
    pk_frmw_objects.insert_into_frmw_objects(i_owner             => 'ALERT',
                                             i_obj_name          => 'EPIS_DIAG_STAG',
                                             i_obj_type          => 'TABLE',
                                             i_flg_category      => 'TRS',
                                             i_flg_alert_default => 'N',
                                             i_delete_script     => NULL,
                                             i_flg_default_child => 'N');

    BEGIN
        EXECUTE IMMEDIATE '
CREATE TABLE EPIS_DIAG_STAG
(
ID_EPIS_DIAGNOSIS         NUMBER(24) NOT NULL, 
NUM_STAGING_BASIS         NUMBER(24) DEFAULT 1 NOT NULL, 
ID_STAGING_BASIS          NUMBER(24), 
ID_SBASIS_INST_OWNER      NUMBER(24), 
ID_TNM_T                  NUMBER(24), 
ID_TNM_T_INST_OWNER       NUMBER(24), 
CODE_TNM_T                VARCHAR2(200 CHAR), 
ID_TNM_N                  NUMBER(24), 
ID_TNM_N_INST_OWNER       NUMBER(24), 
CODE_TNM_N                VARCHAR2(200 CHAR), 
ID_TNM_M                  NUMBER(24), 
ID_TNM_M_INST_OWNER       NUMBER(24), 
CODE_TNM_M                VARCHAR2(200 CHAR), 
ID_METASTATIC_SITES       NUMBER(24), 
ID_MSITES_INST_OWNER      NUMBER(24), 
ID_STAGING_GROUP          NUMBER(24), 
ID_SGROUP_INST_OWNER      NUMBER(24), 
ID_RESIDUAL_TUMOR         NUMBER(24), 
ID_RTUMOR_INST_OWNER      NUMBER(24), 
ID_SURGICAL_MARGINS       NUMBER(24), 
ID_SMARGINS_INST_OWNER    NUMBER(24), 
ID_LYMPH_VASC_INV         NUMBER(24), 
ID_LVINV_INST_OWNER       NUMBER(24), 
ID_OTHER_STAGING_SYS      NUMBER(24), 
ID_OSTGSYS_INST_OWNER     NUMBER(24),
ID_CANCEL_REASON          NUMBER(24),
CANCEL_NOTES              VARCHAR2(1000 CHAR),
ID_PROF_CREATE            NUMBER(24) NOT NULL,
DT_EPIS_DIAGNOSIS_STAG    TIMESTAMP WITH LOCAL TIME ZONE NOT NULL, 
  CREATE_USER VARCHAR2(24 CHAR),
  CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
  CREATE_INSTITUTION NUMBER(24),
  UPDATE_USER VARCHAR2(24 CHAR),
  UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
  UPDATE_INSTITUTION NUMBER(24)
) TABLESPACE ALERT_DATA';
    EXCEPTION
        WHEN e_name_already_exists THEN
            dbms_output.put_line('AVISO: Operação já executada anteriormente.');
    END;

    EXECUTE IMMEDIATE 'COMMENT ON TABLE EPIS_DIAG_STAG IS ''Cancer diagnosis tumors list''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_EPIS_DIAGNOSIS IS ''Episode diagnosis id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.NUM_STAGING_BASIS IS ''Staging basis number''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_STAGING_BASIS IS ''Staging basis id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_SBASIS_INST_OWNER IS ''Staging basis content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_T IS ''TNM - T''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_T_INST_OWNER IS ''TNM - T content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CODE_TNM_T IS ''Staging concept code of T''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_N IS ''TNM - N''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_N_INST_OWNER IS ''TNM - N content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CODE_TNM_N IS ''Staging concept code of N''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_M IS ''TNM - M''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_TNM_M_INST_OWNER IS ''TNM - M content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CODE_TNM_M IS ''Staging concept code of M''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_METASTATIC_SITES IS ''Metastatic sites id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_MSITES_INST_OWNER IS ''Metastatic sites content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_STAGING_GROUP IS ''Staging group id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_SGROUP_INST_OWNER IS ''Staging group content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_RESIDUAL_TUMOR IS ''Residual tumor id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_RTUMOR_INST_OWNER IS ''Residual tumor content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_SURGICAL_MARGINS IS ''Surgical margins id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_SMARGINS_INST_OWNER IS ''Surgical margins content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_LYMPH_VASC_INV IS ''Lymph-vascular invasion id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_LVINV_INST_OWNER IS ''Lymph-vascular invasion content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_OTHER_STAGING_SYS IS ''Other staging systems id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_OSTGSYS_INST_OWNER IS ''Other staging systems content owner. Default 0 - ALERT''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_CANCEL_REASON IS ''Cancel reason id''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CANCEL_NOTES IS ''Cancel notes''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.ID_PROF_CREATE IS ''Professional which created the record''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.DT_EPIS_DIAGNOSIS_STAG IS ''Record creation date''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CREATE_USER is ''Professional ID which created the record''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CREATE_TIME is ''Date of record creation''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.CREATE_INSTITUTION is ''Institution ID where record was created''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.UPDATE_USER is ''Professional ID who last updated the record''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.UPDATE_TIME is ''Date when record was last updated''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN EPIS_DIAG_STAG.UPDATE_INSTITUTION is ''Institution ID where record was last updated''';
END;
/
-- CHANGE END: Alexandre Santos