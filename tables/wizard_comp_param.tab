-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 23/12/2010 16:32
-- CHANGE REASON: [ALERT-151846] DB versioning - Tables
CREATE TABLE WIZARD_COMP_PARAM
(
  ID_WIZARD NUMBER(24) NOT NULL,
ID_WIZARD_COMPONENT NUMBER(24) NOT NULL,
ID_INSTITUTION NUMBER(24) NOT NULL,
RANK NUMBER(12) NOT NULL,
FLG_GENDER VARCHAR2(1 CHAR),
AGE_MIN NUMBER(12),
AGE_MAX NUMBER(12),
FLG_AVAILABLE VARCHAR2(1 CHAR) DEFAULT 'Y' NOT NULL,
CREATE_USER VARCHAR2(24 CHAR),
CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
CREATE_INSTITUTION NUMBER(24),
UPDATE_USER VARCHAR2(24 CHAR),
UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
UPDATE_INSTITUTION NUMBER(24)
);
/

ALTER TABLE WIZARD_COMP_PARAM MOVE TABLESPACE TABLE_S;

COMMENT ON TABLE WIZARD_COMP_PARAM IS 'Wizard/Components parametrizations';
COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_WIZARD IS 'Wizard identifier. Part of primary key';
COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_WIZARD_COMPONENT IS 'Wizard component identifier. Part of primary key';
COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_INSTITUTION IS 'Institution id. Default is 0. Part of primary key';
COMMENT ON COLUMN WIZARD_COMP_PARAM.RANK IS 'Components sort column';
COMMENT ON COLUMN WIZARD_COMP_PARAM.FLG_GENDER IS 'Patient gender must be equal to value for this component to be available. NULL means available to all genders';
COMMENT ON COLUMN WIZARD_COMP_PARAM.AGE_MIN IS 'Patient minimum age for this component to be available. NULL means available to all ages';
COMMENT ON COLUMN WIZARD_COMP_PARAM.AGE_MAX IS 'Patient maximum age for this component to be available. NULL means available to all ages';
COMMENT ON COLUMN WIZARD_COMP_PARAM.FLG_AVAILABLE IS 'Availability of the record';
COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_USER is 'Professional ID which created the record';
COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_TIME is 'Date of record creation';
COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_INSTITUTION is 'Institution ID where record was created';
COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_USER is 'Professional ID who last updated the record';
COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_TIME is 'Date when record was last updated';
COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_INSTITUTION is 'Institution ID where record was last updated';
-- CHANGE END: Alexandre Santos

-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 19/01/2011 16:46
-- CHANGE REASON: [ALERT-151846] DB versioning - Tables
DECLARE
    e_name_already_exists EXCEPTION;

    PRAGMA EXCEPTION_INIT(e_name_already_exists, -00955);
BEGIN
    BEGIN
        EXECUTE IMMEDIATE '
CREATE TABLE WIZARD_COMP_PARAM
(
  ID_WIZARD NUMBER(24) NOT NULL,
ID_WIZARD_COMPONENT NUMBER(24) NOT NULL,
ID_INSTITUTION NUMBER(24) NOT NULL,
RANK NUMBER(12) NOT NULL,
FLG_GENDER VARCHAR2(1 CHAR),
AGE_MIN NUMBER(12),
AGE_MAX NUMBER(12),
FLG_AVAILABLE VARCHAR2(1 CHAR) DEFAULT ''Y'' NOT NULL,
CREATE_USER VARCHAR2(24 CHAR),
CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
CREATE_INSTITUTION NUMBER(24),
UPDATE_USER VARCHAR2(24 CHAR),
UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE,
UPDATE_INSTITUTION NUMBER(24)
)';
    EXCEPTION
        WHEN e_name_already_exists THEN
            dbms_output.put_line('AVISO: Operação já executada anteriormente.');
    END;

EXECUTE IMMEDIATE 'ALTER TABLE WIZARD_COMP_PARAM MOVE TABLESPACE TABLE_S';

EXECUTE IMMEDIATE 'COMMENT ON TABLE WIZARD_COMP_PARAM IS ''Wizard/Components parametrizations''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_WIZARD IS ''Wizard identifier. Part of primary key''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_WIZARD_COMPONENT IS ''Wizard component identifier. Part of primary key''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.ID_INSTITUTION IS ''Institution id. Default is 0. Part of primary key''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.RANK IS ''Components sort column''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.FLG_GENDER IS ''Patient gender must be equal to value for this component to be available. NULL means available to all genders''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.AGE_MIN IS ''Patient minimum age for this component to be available. NULL means available to all ages''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.AGE_MAX IS ''Patient maximum age for this component to be available. NULL means available to all ages''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.FLG_AVAILABLE IS ''Availability of the record''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_USER is ''Professional ID which created the record''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_TIME is ''Date of record creation''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.CREATE_INSTITUTION is ''Institution ID where record was created''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_USER is ''Professional ID who last updated the record''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_TIME is ''Date when record was last updated''';
EXECUTE IMMEDIATE 'COMMENT ON COLUMN WIZARD_COMP_PARAM.UPDATE_INSTITUTION is ''Institution ID where record was last updated''';
END;
/
-- CHANGE END: Alexandre Santos