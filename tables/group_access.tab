CREATE TABLE GROUP_ACCESS
 (ID_GROUP_ACCESS NUMBER(24) NOT NULL
 ,NAME_GROUP_ACCESS VARCHAR2(200 CHAR) NOT NULL
 ,FLG_TYPE VARCHAR(2 CHAR) NOT NULL
 ,ID_INSTITUTION NUMBER(24) NOT NULL
 ,FLG_AVAILABLE VARCHAR2(1 CHAR) DEFAULT 'Y' NOT NULL
 ,CREATE_USER VARCHAR2(24 CHAR)
 ,CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER(24)
 ,UPDATE_USER VARCHAR2(24 CHAR)
 ,UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24)
 );

COMMENT ON TABLE GROUP_ACCESS IS 'Group access parameterization';
COMMENT ON COLUMN GROUP_ACCESS.ID_GROUP_ACCESS IS 'Group access ID';
COMMENT ON COLUMN GROUP_ACCESS.NAME_GROUP_ACCESS IS 'Group access name';
COMMENT ON COLUMN GROUP_ACCESS.FLG_TYPE IS 'Flag that indicates the group access type';
COMMENT ON COLUMN GROUP_ACCESS.ID_INSTITUTION IS 'Institution ID';
COMMENT ON COLUMN GROUP_ACCESS.FLG_AVAILABLE IS 'Indicates if the group access is available';
COMMENT ON COLUMN GROUP_ACCESS.CREATE_USER IS 'Create user';
COMMENT ON COLUMN GROUP_ACCESS.CREATE_TIME IS 'Create time';
COMMENT ON COLUMN GROUP_ACCESS.CREATE_INSTITUTION IS 'Create institution';
COMMENT ON COLUMN GROUP_ACCESS.UPDATE_USER IS 'Update user';
COMMENT ON COLUMN GROUP_ACCESS.UPDATE_TIME IS 'Update time';
COMMENT ON COLUMN GROUP_ACCESS.UPDATE_INSTITUTION IS 'Update institution';


-- CHANGED BY: Ana Matos
-- CHANGE DATE: 13/02/2017 13:51
-- CHANGE REASON: [ALERT-328796] 
begin
pk_versioning.run('ALTER TABLE GROUP_ACCESS ADD (ID_SOFTWARE NUMBER(24))');
end;
/

COMMENT ON COLUMN GROUP_ACCESS.ID_SOFTWARE IS 'Software ID';
-- CHANGE END: Ana Matos

-- CHANGED BY: Diogo Oliveira
-- CHANGE DATE: 04/09/2018
-- CHANGE REASON: [EMR-5344] 
alter table GROUP_ACCESS
DROP CONSTRAINT GAS_FLG_TYPE_CHK;

alter table GROUP_ACCESS
  add constraint GAS_FLG_TYPE_CHK
  check (flg_type IN ('A', 'E','IO','IR'));

comment on column GROUP_ACCESS.FLG_TYPE
  is 'Flag that indicates the group access type (A-Lab Tests/E-Exams/IO-Permission to see lab tests orders for infectous diseases/IR-Permission to see lab tests results for infectous diseases';
-- CHANGE END: Diogo Oliveira