-- CHANGED BY: Fábio Oliveira
-- CHANGE DATE: 03/09/2009 16:50
-- CHANGE REASON: [ALERT-41836] GRIDS_EA development

  CREATE TABLE GRIDS_EA
   (ID_EPISODE NUMBER(24),
ID_VISIT NUMBER(24),
ID_CLINICAL_SERVICE NUMBER(24),
EPISODE_FLG_STATUS VARCHAR2(1),
ID_EPIS_TYPE NUMBER(12,0),
EPISODE_COMPANION VARCHAR2(200),
BARCODE VARCHAR2(30),
ID_PROF_CANCEL NUMBER(24),
FLG_TYPE VARCHAR2(1),
ID_PREV_EPISODE NUMBER(24),
DT_BEGIN_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
DT_END_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
DT_CANCEL_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
ID_FAST_TRACK NUMBER(24),
FLG_EHR VARCHAR2(1),
ID_PATIENT NUMBER(24),
ID_DEPARTMENT NUMBER(24),
ID_INSTITUTION NUMBER(12,0),
ID_BED NUMBER(24),
ID_ROOM NUMBER(24),
ID_PROFESSIONAL NUMBER(24),
NORTON NUMBER(3,0),
FLG_HYDRIC VARCHAR2(1),
FLG_WOUND VARCHAR2(1),
EPIS_INFO_COMPANION VARCHAR2(200),
FLG_UNKNOWN VARCHAR2(1),
DESC_INFO VARCHAR2(4000),
ID_SCHEDULE NUMBER(24),
ID_FIRST_NURSE_RESP NUMBER(24),
EPIS_INFO_FLG_STATUS VARCHAR2(1),
ID_DEP_CLIN_SERV NUMBER(24),
ID_FIRST_DEP_CLIN_SERV NUMBER(24),
DT_FIRST_OBS_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
DT_FIRST_NURSE_OBS_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
DT_FIRST_INST_OBS_TSTZ TIMESTAMP (6) WITH LOCAL TIME ZONE,
TRIAGE_ACUITY VARCHAR2(50),
TRIAGE_COLOR_TEXT VARCHAR2(240),
TRIAGE_RANK_ACUITY VARCHAR2(200),
TRIAGE_FLG_LETTER VARCHAR2(1),
ID_TRIAGE_COLOR NUMBER(12),
ID_SOFTWARE NUMBER(24),
CREATE_USER VARCHAR2(24),
CREATE_TIME TIMESTAMP (6) WITH LOCAL TIME ZONE,
CREATE_INSTITUTION NUMBER(24),
UPDATE_USER VARCHAR2(24),
UPDATE_TIME TIMESTAMP (6) WITH LOCAL TIME ZONE,
UPDATE_INSTITUTION NUMBER(24)
   ) ;

   COMMENT ON COLUMN GRIDS_EA.ID_EPISODE IS 'EPISODE.ID_EPISODE (primary key)';
   COMMENT ON COLUMN GRIDS_EA.ID_VISIT IS 'EPISODE.ID_VISIT';
   COMMENT ON COLUMN GRIDS_EA.ID_CLINICAL_SERVICE IS 'EPISODE.ID_CLINICAL_SERVICE';
   COMMENT ON COLUMN GRIDS_EA.EPISODE_FLG_STATUS IS 'EPISODE.FLG_STATUS';
   COMMENT ON COLUMN GRIDS_EA.ID_EPIS_TYPE IS 'EPISODE.ID_EPIS_TYPE';
   COMMENT ON COLUMN GRIDS_EA.EPISODE_COMPANION IS 'EPISODE.COMPANION';
   COMMENT ON COLUMN GRIDS_EA.BARCODE IS 'EPISODE.BARCODE';
   COMMENT ON COLUMN GRIDS_EA.ID_PROF_CANCEL IS 'EPISODE.ID_PROF_CANCEL';
   COMMENT ON COLUMN GRIDS_EA.FLG_TYPE IS 'EPISODE.FLG_TYPE';
   COMMENT ON COLUMN GRIDS_EA.ID_PREV_EPISODE IS 'EPISODE.ID_PREV_EPISODE';
   COMMENT ON COLUMN GRIDS_EA.DT_BEGIN_TSTZ IS 'EPISODE.DT_BEGIN_TSTZ';
   COMMENT ON COLUMN GRIDS_EA.DT_END_TSTZ IS 'EPISODE.DT_END_TSTZ';
   COMMENT ON COLUMN GRIDS_EA.DT_CANCEL_TSTZ IS 'EPISODE.DT_CANCEL_TSTZ';
   COMMENT ON COLUMN GRIDS_EA.ID_FAST_TRACK IS 'EPISODE.ID_FAST_TRACK';
   COMMENT ON COLUMN GRIDS_EA.FLG_EHR IS 'EPISODE.FLG_EHR';
   COMMENT ON COLUMN GRIDS_EA.ID_PATIENT IS 'EPISODE.ID_PATIENT';
   COMMENT ON COLUMN GRIDS_EA.ID_DEPARTMENT IS 'EPISODE.ID_DEPARTMENT';
   COMMENT ON COLUMN GRIDS_EA.ID_INSTITUTION IS 'EPISODE.ID_INSTITUTION';
   COMMENT ON COLUMN GRIDS_EA.ID_BED IS 'EPIS_INFO.ID_BED';
   COMMENT ON COLUMN GRIDS_EA.ID_ROOM IS 'EPIS_INFO.ID_ROOM';
   COMMENT ON COLUMN GRIDS_EA.ID_PROFESSIONAL IS 'EPIS_INFO.ID_PROFESSIONAL';
   COMMENT ON COLUMN GRIDS_EA.NORTON IS 'EPIS_INFO.NORTON';
   COMMENT ON COLUMN GRIDS_EA.FLG_HYDRIC IS 'EPIS_INFO.FLG_HYDRIC';
   COMMENT ON COLUMN GRIDS_EA.FLG_WOUND IS 'EPIS_INFO.FLG_WOUND';
   COMMENT ON COLUMN GRIDS_EA.EPIS_INFO_COMPANION IS 'EPIS_INFO.COMPANION';
   COMMENT ON COLUMN GRIDS_EA.FLG_UNKNOWN IS 'EPIS_INFO.FLG_UNKNOWN';
   COMMENT ON COLUMN GRIDS_EA.DESC_INFO IS 'EPIS_INFO.DESC_INFO';
   COMMENT ON COLUMN GRIDS_EA.ID_SCHEDULE IS 'EPIS_INFO.ID_SCHEDULE';



   COMMENT ON COLUMN GRIDS_EA.ID_FIRST_NURSE_RESP IS 'EPIS_INFO.ID_FIRST_NURSE_RESP';



   COMMENT ON COLUMN GRIDS_EA.EPIS_INFO_FLG_STATUS IS 'EPIS_INFO.FLG_STATUS';



   COMMENT ON COLUMN GRIDS_EA.ID_DEP_CLIN_SERV IS 'EPIS_INFO.ID_DEP_CLIN_SERV';



   COMMENT ON COLUMN GRIDS_EA.ID_FIRST_DEP_CLIN_SERV IS 'EPIS_INFO.ID_FIRST_DEP_CLIN_SERV';



   COMMENT ON COLUMN GRIDS_EA.DT_FIRST_OBS_TSTZ IS 'EPIS_INFO.DT_FIRST_OBS_TSTZ';



   COMMENT ON COLUMN GRIDS_EA.DT_FIRST_NURSE_OBS_TSTZ IS 'EPIS_INFO.DT_FIRST_NURSE_OBS_TSTZ';



   COMMENT ON COLUMN GRIDS_EA.DT_FIRST_INST_OBS_TSTZ IS 'EPIS_INFO.DT_FIRST_INST_OBS_TSTZ';



   COMMENT ON COLUMN GRIDS_EA.TRIAGE_ACUITY IS 'EPIS_INFO.TRIAGE_ACUITY';



   COMMENT ON COLUMN GRIDS_EA.TRIAGE_COLOR_TEXT IS 'EPIS_INFO.TRIAGE_COLOR_TEXT';



   COMMENT ON COLUMN GRIDS_EA.TRIAGE_RANK_ACUITY IS 'EPIS_INFO.TRIAGE_RANK_ACUITY';



   COMMENT ON COLUMN GRIDS_EA.TRIAGE_FLG_LETTER IS 'EPIS_INFO.TRIAGE_FLG_LETTER';



   COMMENT ON COLUMN GRIDS_EA.ID_TRIAGE_COLOR IS 'EPIS_INFO.ID_TRIAGE_COLOR';



   COMMENT ON COLUMN GRIDS_EA.ID_SOFTWARE IS 'EPIS_INFO.ID_SOFTWARE';



   COMMENT ON TABLE GRIDS_EA  IS 'Easy access table used on clinical products main grids';
-- CHANGE END: Fábio Oliveira

-- CHANGED BY: Fábio Oliveira
-- CHANGE DATE: 04/09/2009 18:56
-- CHANGE REASON: [ALERT-41836] Grids_EA
alter table grids_ea add DT_DG_LAST_UPDATE       TIMESTAMP(6) WITH LOCAL TIME ZONE;
-- CHANGE END: Fábio Oliveira

-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 27/10/2009 11:19
-- CHANGE REASON: [ALERT-51289] Add ID_ANNOUNCED_ARRIVAL to GRID_EA table; Update the views that use this table
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE grids_ea add id_announced_arrival NUMBER(24)';
    EXECUTE IMMEDIATE 'COMMENT ON column grids_ea.id_announced_arrival IS ''ANNOUNCED_ARRIVAL.ID_ANNOUNCED_ARRIVAL''';
END;
-- CHANGE END: Alexandre Santos

-- CHANGED BY: José Brito
-- CHANGE DATE: 06/06/2011 09:58
-- CHANGE REASON: [ALERT-181883] First observation date in facility transfers
BEGIN
   EXECUTE IMMEDIATE 'ALTER TABLE grids_ea ADD flg_has_stripes VARCHAR2(1 CHAR)';
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/

COMMENT ON COLUMN grids_ea.flg_has_stripes IS 'Indicates if the triage color column (patient grids) should have stripes (Y), indicating status of first observation by the physician.';
-- CHANGE END: José Brito

-- CHANGED BY: Elisabete Bugalho
-- CHANGE DATE: 19/01/2016 10:14
-- CHANGE REASON: [ALERT-317933] Database model documentation and comments corretions
--                
-- Add comments to the columns 
comment on column GRIDS_EA.create_user
  is 'Creation User';
comment on column GRIDS_EA.create_time
  is 'Creation Time';
comment on column GRIDS_EA.create_institution
  is 'Creation Institution';
comment on column GRIDS_EA.update_user
  is 'Update User';
comment on column GRIDS_EA.update_time
  is 'Update Time';
comment on column GRIDS_EA.update_institution
  is 'Update Institution';
comment on column GRIDS_EA.dt_dg_last_update
  is 'Date of the table''s last update';  
-- CHANGE END: Elisabete Bugalho

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 12/07/2021 15:01
-- CHANGE REASON: [EMR-47137]
begin
pk_versioning.run('ALTER TABLE grids_ea ADD id_fast_track_er_law NUMBER(24)');
pk_versioning.run('ALTER TABLE grids_ea ADD flg_has_transfer VARCHAR2(1 CHAR)');
end;
/

comment on column grids_ea.id_fast_track_er_law is 'Fast track with Emergency Law';
comment on column grids_ea.flg_has_transfer is 'Indicates if the there is an institution transfer pending';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 12/07/2021 16:49
-- CHANGE REASON: [EMR-47137]
begin
pk_versioning.run('ALTER TABLE grids_ea ADD id_fast_track_er_law NUMBER(24)');
pk_versioning.run('ALTER TABLE grids_ea ADD flg_has_transfer NUMBER(24)');
end;
/

comment on column grids_ea.id_fast_track_er_law is 'Fast track with Emergency Law';
comment on column grids_ea.flg_has_transfer is 'Indicates if the there is an institution transfer pending';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 22/07/2021 10:20
-- CHANGE REASON: [EMR-47137]
begin
pk_versioning.run('ALTER TABLE grids_ea ADD id_fast_track_er_law NUMBER(24)');
pk_versioning.run('ALTER TABLE grids_ea ADD flg_has_transfer NUMBER(24)');
end;
/

comment on column grids_ea.id_fast_track_er_law is 'Fast track with Emergency Law';
comment on column grids_ea.flg_has_transfer is 'Indicates if the there is an institution transfer pending';
-- CHANGE END: Ana Matos