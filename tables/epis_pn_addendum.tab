--26/01/2011
--[ALERT-129745] H&P reformulation in INPATIENT
CREATE TABLE EPIS_PN_ADDENDUM
 (ID_EPIS_PN_ADDENDUM NUMBER(24) NOT NULL
 ,ID_EPIS_PN NUMBER(24) NOT NULL
 ,FLG_STATUS VARCHAR2(1 CHAR) DEFAULT 'D' NOT NULL
 ,ID_PROFESSIONAL NUMBER(24) NOT NULL
 ,DT_ADDENDUM TIMESTAMP WITH LOCAL TIME ZONE NOT NULL
 ,PN_ADDENDUM CLOB NOT NULL
 ,DT_LAST_UPDATE TIMESTAMP WITH LOCAL TIME ZONE
 ,ID_PROF_LAST_UPDATE NUMBER(24)
 ,DT_SIGNOFF TIMESTAMP WITH LOCAL TIME ZONE
 ,ID_PROF_SIGNOFF NUMBER(24)
 ,ID_PROF_CANCEL NUMBER(24)
 ,ID_CANCEL_REASON NUMBER(24)
 ,DT_CANCEL TIMESTAMP WITH LOCAL TIME ZONE
 ,NOTES_CANCEL VARCHAR2(1000 CHAR)
 ,CREATE_USER VARCHAR2(30 CHAR)
 ,CREATE_TIME TIMESTAMP(6) WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER(24)
 ,UPDATE_USER VARCHAR2(30 CHAR)
 ,UPDATE_TIME TIMESTAMP(6) WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24)
 )
/

COMMENT ON TABLE EPIS_PN_ADDENDUM IS 'Progress notes sign off addendums'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_EPIS_PN_ADDENDUM IS 'Addendum ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_EPIS_PN IS 'Epis Progress Note ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.FLG_STATUS IS 'Addendum status. D- Draft; S-Signed-off; C-Cancelled; F-Finished'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_PROFESSIONAL IS 'Professional ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.DT_ADDENDUM IS 'Addendum date'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.PN_ADDENDUM IS 'Addendum (text)'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.DT_LAST_UPDATE IS 'Last update date'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_PROF_LAST_UPDATE IS 'Last update professional ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.DT_SIGNOFF IS 'Date of the sign-off.'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_PROF_SIGNOFF IS 'Sign off professional ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_PROF_CANCEL IS 'Cancel professional ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.ID_CANCEL_REASON IS 'Cancel reason ID'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.DT_CANCEL IS 'Cancel date'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.NOTES_CANCEL IS 'Cancel notes'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.CREATE_USER IS 'Professional ID that creates the registry'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.CREATE_TIME IS 'Date of registry creation'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.CREATE_INSTITUTION IS 'Institution ID where registry was created'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.UPDATE_USER IS 'Professional ID that last updates the registry'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.UPDATE_TIME IS 'Date of registry last update'
/

COMMENT ON COLUMN EPIS_PN_ADDENDUM.UPDATE_INSTITUTION IS 'Institution ID where registry was last updated'
/

-- CHANGED BY: rui.mendonca
-- CHANGE DATE: 15/12/2017 16:06
-- CHANGE REASON: [CALERT-1149] DB changes for comments screen
BEGIN
    pk_versioning.run(q'#
ALTER TABLE 
  epis_pn_addendum 
ADD 
  flg_type VARCHAR2(1 CHAR) DEFAULT 'A' NOT NULL#');
END;
/
COMMENT ON column epis_pn_addendum.flg_type IS 'Type of addendum; A - Addendum; C - Comments';
-- CHANGE END: rui.mendonca