-- CHANGED BY: Rita Lopes
-- CHANGE DATE: 03/07/2009 18:04
-- CHANGE REASON: [ALERT-665] Alteracoes para as consultas de decisão terapeutica
-- Creating Table 'THERAPEUTIC_DECISION'
CREATE TABLE THERAPEUTIC_DECISION
 (ID_THERAPEUTIC_DECISION NUMBER(24) NOT NULL
 ,ID_PATIENT NUMBER(24) NOT NULL
 ,ID_EPISODE NUMBER(24) NOT NULL
 ,THERAPEUTIC_DECISION CLOB NOT NULL
 ,DT_CREATION TIMESTAMP WITH LOCAL TIME ZONE NOT NULL
 ,FLG_STATUS VARCHAR2(1) NOT NULL
 ,ID_PROFESSIONAL NUMBER(24) NOT NULL
 ,ID_PARENT NUMBER(24)
 ,CREATE_USER             VARCHAR2(24)
 ,CREATE_TIME             TIMESTAMP(6) WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION      NUMBER(24)
 ,UPDATE_USER             VARCHAR2(24)
 ,UPDATE_TIME             TIMESTAMP(6) WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION      NUMBER(24)

 );

COMMENT ON TABLE THERAPEUTIC_DECISION IS 'Therapeutic decision';

COMMENT ON COLUMN THERAPEUTIC_DECISION.ID_THERAPEUTIC_DECISION IS 'ID';

COMMENT ON COLUMN THERAPEUTIC_DECISION.ID_PATIENT IS 'ID PATIENT';

COMMENT ON COLUMN THERAPEUTIC_DECISION.ID_EPISODE IS 'ID EPISODE';

COMMENT ON COLUMN THERAPEUTIC_DECISION.THERAPEUTIC_DECISION IS 'Therapeutic decision';

COMMENT ON COLUMN THERAPEUTIC_DECISION.DT_CREATION IS 'dt creation';

COMMENT ON COLUMN THERAPEUTIC_DECISION.ID_PROFESSIONAL IS 'ID professional that made the register';

COMMENT ON COLUMN THERAPEUTIC_DECISION.ID_PARENT IS 'ID parent of the record that was edited';

COMMENT ON COLUMN THERAPEUTIC_DECISION.FLG_STATUS IS 'Flag Status - A - Active; O - Outdated';

COMMENT ON COLUMN THERAPEUTIC_DECISION.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN THERAPEUTIC_DECISION.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN THERAPEUTIC_DECISION.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN THERAPEUTIC_DECISION.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN THERAPEUTIC_DECISION.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN THERAPEUTIC_DECISION.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Rita Lopes

-- CHANGED BY: Pedro Henriques
-- CHANGE DATE: 09/07/2018 11:32
-- CHANGE REASON: [EMR-4796] 
DECLARE l_sql VARCHAR2(1000 CHAR);
BEGIN
    l_sql := 'ALTER TABLE alert.therapeutic_decision move lob(therapeutic_decision) store AS (tablespace alert_lob)';
    pk_versioning.run(l_sql);
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
-- CHANGE END: Pedro Henriques