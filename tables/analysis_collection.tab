-- CHANGED BY: Ana Matos
-- CHANGE DATE: 01/09/2011 17:25
-- CHANGE REASON: [ALERT-193514] 
CREATE TABLE ANALYSIS_COLLECTION
 (ID_ANALYSIS_COLLECTION NUMBER(24) NOT NULL
 ,ID_ANALYSIS_INSTIT_SOFT NUMBER(24) NOT NULL
 ,NUM_COLLECTION NUMBER(24) NOT NULL
 ,ORDER_COLLECTION NUMBER(24)
 ,FLG_INTERVAL_TYPE NUMBER(24) NOT NULL
 ,INTERVAL NUMBER(12,4) NOT NULL
 ,FLG_AVAILABLE VARCHAR2(1 CHAR) NOT NULL
 ,FLG_PARAMETRIZATION_TYPE VARCHAR2(1) DEFAULT 'C'
 ,FLG_STATUS VARCHAR2(1 CHAR) NOT NULL
 ,CREATE_USER VARCHAR2(24)
 ,CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER(24)
 ,UPDATE_USER VARCHAR2(24)
 ,UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24)
 );

COMMENT ON TABLE ANALYSIS_COLLECTION IS 'This table contains the amount and the interval of the collections for a lab test';
COMMENT ON COLUMN ANALYSIS_COLLECTION.ID_ANALYSIS_COLLECTION IS 'ID Analysis Colletion - primary key';
COMMENT ON COLUMN ANALYSIS_COLLECTION.ID_ANALYSIS_INSTIT_SOFT IS 'ID Analysis Software/Institution';
COMMENT ON COLUMN ANALYSIS_COLLECTION.NUM_COLLECTION IS 'Amount of Collections';
COMMENT ON COLUMN ANALYSIS_COLLECTION.ORDER_COLLECTION IS 'Order of the Collection';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_INTERVAL_TYPE IS 'Type of Interval (R - Regular, I - Irregular)';
COMMENT ON COLUMN ANALYSIS_COLLECTION.INTERVAL IS 'Time between intervals';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_AVAILABLE IS 'Flag that indicates if this record is available';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_PARAMETRIZATION_TYPE IS 'Type of parameterization used to create this data: C - configurations team, directy in the database, B - backoffice';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_STATUS IS 'Flag of this data A - Active, E - Edited, C - Canceled';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_USER IS 'Creation user';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_TIME IS 'Creation time';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_INSTITUTION IS 'Creation institution';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_USER IS 'Update user';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_TIME IS 'Update time';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_INSTITUTION IS 'Update institution';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 15/09/2011 11:29
-- CHANGE REASON: [ALERT-195343] 
ALTER TABLE analysis_collection MODIFY flg_interval_type varchar(1 char);
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 22/09/2011 16:57
-- CHANGE REASON: [ALERT-196449] 
ALTER TABLE ANALYSIS_COLLECTION MODIFY FLG_PARAMETRIZATION_TYPE VARCHAR2(1 CHAR);
 
ALTER TABLE ANALYSIS_COLLECTION MODIFY CREATE_USER VARCHAR2(24 CHAR);
 
ALTER TABLE ANALYSIS_COLLECTION MODIFY UPDATE_USER VARCHAR2(24 CHAR);
 
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 22/09/2011 17:14
-- CHANGE REASON: [ALERT-196449] 
ALTER TABLE ANALYSIS_COLLECTION MODIFY (FLG_PARAMETRIZATION_TYPE NOT NULL);
 
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 04/10/2011 17:18
-- CHANGE REASON: [ALERT-197519] 
ALTER TABLE ANALYSIS_COLLECTION MODIFY (INTERVAL NULL);
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 29/12/2011 12:08
-- CHANGE REASON: [ALERT-211693] 
ALTER TABLE ANALYSIS_COLLECTION DROP COLUMN ORDER_COLLECTION;
ALTER TABLE ANALYSIS_COLLECTION DROP COLUMN INTERVAL;

COMMENT ON COLUMN ANALYSIS_COLLECTION.NUM_COLLECTION IS 'Amount of collections';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 08/01/2016 12:00
-- CHANGE REASON: [ALERT-317702] 
COMMENT ON TABLE ANALYSIS_COLLECTION IS 'Lab test collection configuration';

COMMENT ON COLUMN ANALYSIS_COLLECTION.ID_ANALYSIS_COLLECTION IS 'Primary key';
COMMENT ON COLUMN ANALYSIS_COLLECTION.ID_ANALYSIS_INSTIT_SOFT IS 'Institution / software configuration ID';
COMMENT ON COLUMN ANALYSIS_COLLECTION.NUM_COLLECTION IS 'Number of collections';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_INTERVAL_TYPE IS 'Interval type: R - Regular, I - Irregular';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_AVAILABLE IS 'Flag that indicates if the record is available or not (Y/N)';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_PARAMETRIZATION_TYPE IS 'Configuration type: C - Configurations, B - Backoffice';
COMMENT ON COLUMN ANALYSIS_COLLECTION.FLG_STATUS IS 'Flag that indicates the record status: A - Active, E - Edited, C - Canceled';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN ANALYSIS_COLLECTION.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN ANALYSIS_COLLECTION.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Ana Matos