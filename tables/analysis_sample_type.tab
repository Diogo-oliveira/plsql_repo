-- CHANGED BY: Ana Matos
-- CHANGE DATE: 29/12/2011 12:11
-- CHANGE REASON: [ALERT-211693] 
CREATE TABLE ANALYSIS_SAMPLE_TYPE
 (ID_ANALYSIS_SAMPLE_TYPE NUMBER(12) NOT NULL
 ,ID_ANALYSIS NUMBER(24) NOT NULL
 ,ID_SAMPLE_TYPE NUMBER(12) NOT NULL
 ,ID_INSTITUTION NUMBER(24) NOT NULL
 ,CREATE_USER VARCHAR2(24 CHAR)
 ,CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER(24)
 ,UPDATE_USER VARCHAR2(24 CHAR)
 ,UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24));

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_ANALYSIS_SAMPLE_TYPE IS 'Analysis Sample type id';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_ANALYSIS IS 'Analysis id';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_SAMPLE_TYPE IS 'Sample type id';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_INSTITUTION IS 'Institution id';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 03/12/2012 17:11
-- CHANGE REASON: [ALERT-246248] 
ALTER TABLE ANALYSIS_SAMPLE_TYPE DROP COLUMN ID_ANALYSIS_SAMPLE_TYPE;
ALTER TABLE ANALYSIS_SAMPLE_TYPE DROP COLUMN ID_INSTITUTION;


ALTER TABLE ANALYSIS_SAMPLE_TYPE 
 ADD (ID_CONTENT VARCHAR2(200 CHAR) NOT NULL
 ,ID_CONTENT_ANALYSIS VARCHAR2(200 CHAR) NOT NULL
 ,ID_CONTENT_SAMPLE_TYPE VARCHAR2(200 CHAR) NOT NULL
 ,GENDER VARCHAR2(1 CHAR)
 ,AGE_MIN NUMBER(3)
 ,AGE_MAX NUMBER(3))
 MODIFY (ID_ANALYSIS NUMBER(12));

COMMENT ON TABLE ANALYSIS_SAMPLE_TYPE IS 'Table with the possible samples for lab tests';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT IS 'Lab test''s / sample type content id';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_ANALYSIS IS 'Lab test''s content id';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_SAMPLE_TYPE IS 'Sample type''s content id';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.FLG_AVAILABLE IS 'Flag that indicates if this record is available';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.GENDER IS 'Gender';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.AGE_MIN IS 'Minimum age';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.AGE_MAX IS 'Maximum age';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 15/09/2014 12:36
-- CHANGE REASON: [ALERT-294981] 
ALTER TABLE ANALYSIS_SAMPLE_TYPE ADD (CODE_ANALYSIS_SAMPLE_TYPE AS ('ANALYSIS_SAMPLE_TYPE.CODE_ANALYSIS_SAMPLE_TYPE.' || lpad(id_analysis, 12, '0') || lpad(id_sample_type, 12, '0')));

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_ANALYSIS IS 'Lab test ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_SAMPLE_TYPE IS 'Sample type ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CODE_ANALYSIS_SAMPLE_TYPE IS 'Translation code';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT IS 'Lab test''s / sample type content ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_ANALYSIS IS 'Lab test''s content ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_SAMPLE_TYPE IS 'Sample type''s content ID';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 08/01/2016 12:01
-- CHANGE REASON: [ALERT-317702] 
COMMENT ON TABLE ANALYSIS_SAMPLE_TYPE IS 'Lab test''s association to a sample type';

COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_ANALYSIS IS 'Lab test ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_SAMPLE_TYPE IS 'Sample type ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.UPDATE_INSTITUTION IS 'Update Institution';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT IS 'Content unique ID';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_ANALYSIS IS 'Content unique ID (lab test)';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.ID_CONTENT_SAMPLE_TYPE IS 'Content unique ID (sample type)';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.GENDER IS 'Gender';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.AGE_MIN IS 'Minimum age';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.AGE_MAX IS 'Maximum age';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.FLG_AVAILABLE IS 'Flag that indicates if the record is available or not (Y/N)';
COMMENT ON COLUMN ANALYSIS_SAMPLE_TYPE.CODE_ANALYSIS_SAMPLE_TYPE IS 'Translation code (virtual)';
-- CHANGE END: Ana Matos