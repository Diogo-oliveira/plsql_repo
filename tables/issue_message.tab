CREATE TABLE ISSUE_MESSAGE (
	ID_ISSUE_MESSAGE NUMBER(24) NOT NULL,
	ID_ISSUE NUMBER(24) NOT NULL,
	ID_PROF_OWNER NUMBER(24) NOT NULL,
	DT_CREATION TIMESTAMP WITH LOCAL TIME ZONE NOT NULL,
	DT_DELETION TIMESTAMP WITH LOCAL TIME ZONE,
	TEXT VARCHAR2(4000) NOT NULL,
	FLG_STATUS VARCHAR2(1) NOT NULL,
	ID_PROF_ASSIGNED NUMBER(24) NOT NULL
);

COMMENT ON COLUMN ISSUE_MESSAGE.ID_ISSUE_MESSAGE IS 'Primary key';
COMMENT ON COLUMN ISSUE_MESSAGE.ID_ISSUE IS 'The issue for which this message belongs';
COMMENT ON COLUMN ISSUE_MESSAGE.ID_PROF_OWNER IS 'The professional that created the message';
COMMENT ON COLUMN ISSUE_MESSAGE.DT_CREATION IS 'The creation date of this message';
COMMENT ON COLUMN ISSUE_MESSAGE.DT_DELETION IS 'The deletion date of this message';
COMMENT ON COLUMN ISSUE_MESSAGE.TEXT IS 'The description of the message';
COMMENT ON COLUMN ISSUE_MESSAGE.FLG_STATUS IS 'The status of the message: A - Active, C - Canceled';
COMMENT ON COLUMN ISSUE_MESSAGE.ID_PROF_ASSIGNED IS 'The professional for whom the message was destined';

ALTER TABLE ISSUE_MESSAGE
 ADD (ID_PROF_DELETION  NUMBER);

COMMENT ON COLUMN ISSUE_MESSAGE.ID_PROF_DELETION IS 'Professional that has cancelled the issue message';
