-- CHANGED BY: Ana Matos
-- CHANGE DATE: 09/10/2013 10:01
-- CHANGE REASON: [ALERT-266573] 
CREATE TABLE EXAM_QUESTION_RESPONSE_HIST
 (DT_EXAM_QUESTION_RESP_HIST TIMESTAMP WITH LOCAL TIME ZONE DEFAULT current_timestamp NOT NULL
 ,ID_EXAM_QUESTION_RESPONSE NUMBER(24) NOT NULL
 ,ID_EPISODE NUMBER(24)
 ,ID_EXAM_REQ_DET NUMBER(24)
 ,FLG_TIME VARCHAR2(2 CHAR)
 ,ID_QUESTIONNAIRE NUMBER(24)
 ,ID_RESPONSE NUMBER(24)
 ,NOTES CLOB
 ,ID_PROF_LAST_UPDATE NUMBER(24)
 ,DT_LAST_UPDATE_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_USER VARCHAR2(24 CHAR)
 ,CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER(24)
 ,UPDATE_USER VARCHAR2(24 CHAR)
 ,UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24));

COMMENT ON TABLE EXAM_QUESTION_RESPONSE_HIST IS 'Table that stores the answers of the clinical questions history';

COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.DT_EXAM_QUESTION_RESP_HIST IS 'Date when the register was made';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EXAM_QUESTION_RESPONSE IS 'Exam question response ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EXAM_REQ_DET IS 'Exam''s order detail ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.FLG_TIME IS 'Flag that indicates WHEN the questionnaire was answered';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_QUESTIONNAIRE IS 'Question ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_RESPONSE IS 'Response ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.NOTES IS 'Notes';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE.ID_PROF_LAST_UPDATE IS 'Last update professional ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE.DT_LAST_UPDATE_TSTZ IS 'Last update date';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 06/01/2016 17:51
-- CHANGE REASON: [ALERT-317702] 
COMMENT ON TABLE EXAM_QUESTION_RESPONSE_HIST IS 'Table that stores the answers of the clinical questions history';

COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.DT_EXAM_QUESTION_RESP_HIST IS 'Date when the register was made';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EXAM_QUESTION_RESPONSE IS 'Exam question response ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_EXAM_REQ_DET IS 'Exam''s order detail ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.FLG_TIME IS 'Flag that indicates WHEN the questionnaire was answered';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_QUESTIONNAIRE IS 'Question ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_RESPONSE IS 'Response ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.NOTES IS 'Notes';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.ID_PROF_LAST_UPDATE IS 'Last update professional ID';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.DT_LAST_UPDATE_TSTZ IS 'Last update date';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN EXAM_QUESTION_RESPONSE_HIST.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Ana Matos

-- CHANGED BY: Pedro Henriques
-- CHANGE DATE: 09/07/2018 11:33
-- CHANGE REASON: [EMR-4796] 
DECLARE l_sql VARCHAR2(1000 CHAR);
BEGIN
    l_sql := 'ALTER TABLE alert.exam_question_response_hist move lob(notes) store AS (tablespace alert_lob)';
    pk_versioning.run(l_sql);
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
-- CHANGE END: Pedro Henriques