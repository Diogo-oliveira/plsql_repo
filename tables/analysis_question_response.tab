
  CREATE TABLE "ALERT"."ANALYSIS_QUESTION_RESPONSE"
(	"ID_ANALYSIS_QUESTION_RESPONSE" NUMBER(24,0), 
	"ID_ANALYSIS_QUESTIONNAIRE" NUMBER(24,0),
	"ID_ANALYSIS_REQ_DET" NUMBER(24,0),
	"NOTES" VARCHAR2(4000) 
) ;

-- Para adicionar colunas pode ser usado código comentado
-- De momento só são suportados os tipos de dados mais comuns. 
-- ALTER TABLE ANALYSIS_QUESTION_RESPONSE ADD ID_ANALYSIS_QUESTION_RESPONSE NUMBER(24,0) NOT NULL; 
-- ALTER TABLE ANALYSIS_QUESTION_RESPONSE ADD ID_ANALYSIS_QUESTIONNAIRE NUMBER(24,0) NOT NULL;  
-- ALTER TABLE ANALYSIS_QUESTION_RESPONSE ADD ID_ANALYSIS_REQ_DET NUMBER(24,0) NOT NULL;  
-- ALTER TABLE ANALYSIS_QUESTION_RESPONSE ADD NOTES VARCHAR2(4000) NOT NULL;  

COMMENT ON COLUMN "ALERT"."ANALYSIS_QUESTION_RESPONSE"."ID_ANALYSIS_QUESTION_RESPONSE" IS 'Primary Key'; 
COMMENT ON COLUMN "ALERT"."ANALYSIS_QUESTION_RESPONSE"."ID_ANALYSIS_QUESTIONNAIRE" IS 'Analysis Questionnaire';
COMMENT ON COLUMN "ALERT"."ANALYSIS_QUESTION_RESPONSE"."ID_ANALYSIS_REQ_DET" IS 'Id. Req. Detail'; 


-- CHANGED BY: Ana Matos
-- CHANGE DATE: 09/10/2013 10:05
-- CHANGE REASON: [ALERT-266573] 
ALTER TABLE ANALYSIS_QUESTION_RESPONSE 
 ADD (ID_EPISODE NUMBER(24)
 ,ID_HARVEST NUMBER(24)
 ,ID_PROF_LAST_UPDATE NUMBER(24)
 ,DT_LAST_UPDATE_TSTZ TIMESTAMP WITH LOCAL TIME ZONE)
 MODIFY (ID_QUESTIONNAIRE NUMBER(24) NOT NULL);

ALTER TABLE ANALYSIS_QUESTION_RESPONSE MODIFY NOTES VARCHAR2(1000 CHAR);
ALTER TABLE ANALYSIS_QUESTION_RESPONSE MODIFY CREATE_USER VARCHAR2(24 CHAR);
ALTER TABLE ANALYSIS_QUESTION_RESPONSE MODIFY UPDATE_USER VARCHAR2(24 CHAR);

COMMENT ON TABLE ANALYSIS_QUESTION_RESPONSE IS 'Table that stores the answers of the clinical questions';

COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_ANALYSIS_QUESTION_RESPONSE IS 'Primary key';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_ANALYSIS_REQ_DET IS 'Lab test''s order detail ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_HARVEST IS 'Harvest ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_QUESTIONNAIRE IS 'Question ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_RESPONSE IS 'Response ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.ID_PROF_LAST_UPDATE IS 'Last update professional ID';
COMMENT ON COLUMN ANALYSIS_QUESTION_RESPONSE.DT_LAST_UPDATE_TSTZ IS 'Last update date';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 09/10/2013 10:47
-- CHANGE REASON: [ALERT-266575] 
ALTER TABLE ANALYSIS_QUESTION_RESPONSE 
 MODIFY (ID_EPISODE NUMBER(24) NOT NULL);
 
 
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 29/12/2020 18:02
-- CHANGE REASON: [EMR-40083]
DECLARE
e_not_exist EXCEPTION;
PRAGMA EXCEPTION_INIT(e_not_exist, -00942);
BEGIN
EXECUTE IMMEDIATE 'DROP TABLE analysis_question_response_old';
EXCEPTION
WHEN e_not_exist THEN
NULL;
END;
/
-- CHANGE END: Ana Matos