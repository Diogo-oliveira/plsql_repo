-- CHANGED BY: Ana Matos
-- CHANGE DATE: 12/09/2013 09:09
-- CHANGE REASON: [ALERT-264901] 
CREATE TABLE ANALYSIS_REQ_HIST
 (DT_ANALYSIS_REQ_HIST TIMESTAMP WITH LOCAL TIME ZONE DEFAULT current_timestamp NOT NULL
 ,ID_ANALYSIS_REQ NUMBER(24) NOT NULL
 ,ID_PATIENT NUMBER(24)
 ,ID_EPISODE NUMBER(24)
 ,ID_EPISODE_ORIGIN NUMBER(24)
 ,ID_EPISODE_DESTINATION NUMBER(24)
 ,ID_PREV_EPISODE NUMBER(24)
 ,ID_VISIT NUMBER(24)
 ,ID_INSTITUTION NUMBER(12)
 ,FLG_TIME VARCHAR2(1 CHAR)
 ,FLG_STATUS VARCHAR2(2 CHAR)
 ,ID_PROF_WRITES NUMBER(24)
 ,DT_REQ_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,DT_BEGIN_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,DT_SCHEDULE_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,DT_PEND_REQ_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,FLG_PRIORITY VARCHAR2(1 CHAR)
 ,ID_EXEC_INSTITUTION NUMBER(24)
 ,BARCODE VARCHAR2(30 CHAR)
 ,ID_PROF_AUTHORIZE NUMBER(24)
 ,ID_PROF_APPROVE NUMBER(24)
 ,ID_SCHEDULE NUMBER(24)
 ,ID_SCHED_CONSULT NUMBER(24)
 ,NOTES VARCHAR2(4000 CHAR)
 ,NOTES_TECH VARCHAR2(4000 CHAR)
 ,ID_PROF_CANCEL NUMBER(24)
 ,DT_CANCEL_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,ID_CANCEL_REASON NUMBER(24)
 ,NOTES_CANCEL VARCHAR2(4000 CHAR)
 ,ID_ANALYSIS_GROUP NUMBER(24)
 ,ID_PROF_LAST_UPDATE NUMBER(24)
 ,DT_LAST_UPDATE_TSTZ TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_USER VARCHAR2(24 CHAR)
 ,CREATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,CREATE_INSTITUTION NUMBER
 ,UPDATE_USER VARCHAR2(24 CHAR)
 ,UPDATE_TIME TIMESTAMP WITH LOCAL TIME ZONE
 ,UPDATE_INSTITUTION NUMBER(24));

COMMENT ON TABLE ANALYSIS_REQ_HIST IS 'Orders history table';

COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_ANALYSIS_REQ_HIST IS 'Date when the register was made';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_ANALYSIS_REQ IS 'Order''s ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PATIENT IS 'Patient ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_EPISODE_ORIGIN IS 'Episode ID where the order was registered';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_EPISODE_DESTINATION IS 'Episode ID where the order is going to be performed';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PREV_EPISODE IS 'Episode ID where the order was registered (when the visit has more than one episode)';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_VISIT IS 'Visit ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_INSTITUTION IS 'Institution ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.FLG_TIME IS 'To be performed: E - this episode; B - between episodes; N - next episode';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.FLG_STATUS IS 'Flag that indicates the order''s status';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PROF_WRITES IS 'Professional that registers the order';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_REQ_TSTZ IS 'Date that indicates when tjhe order was registered';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_BEGIN_TSTZ IS 'Date for which the order is to be performed';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_SCHEDULE_TSTZ IS 'Suggested date for scheduling';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_PEND_REQ_TSTZ IS 'Date that indicates when the order has been updated from pending to ordered';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.FLG_PRIORITY IS 'Flag that indicates the urgency of an order';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_EXEC_INSTITUTION IS 'Institution ID where the order is performed';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.BARCODE IS 'Order''s barcode';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PROF_AUTHORIZE IS 'Professional that authorizes the order';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PROF_APPROVE IS 'Professional that approves the order';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_SCHEDULE IS 'Schedule ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_SCHED_CONSULT IS 'Appointment schedule ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.NOTES IS 'Notes';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.NOTES_TECH IS 'Notes for the technician';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PROF_CANCEL IS 'Professional that cancels the order';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_CANCEL_TSTZ IS 'Date that indicates when the order was cancelled';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_CANCEL_REASON IS 'Cancel reason ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.NOTES_CANCEL IS 'Cancelation notes';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_ANALYSIS_GROUP IS 'Lab tests'' group ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.ID_PROF_LAST_UPDATE IS 'Last update professional ID';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.DT_LAST_UPDATE_TSTZ IS 'Last update date';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.CREATE_USER IS 'Creation User';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.CREATE_TIME IS 'Creation Time';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.CREATE_INSTITUTION IS 'Creation Institution';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.UPDATE_USER IS 'Update User';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.UPDATE_TIME IS 'Update Time';
COMMENT ON COLUMN ANALYSIS_REQ_HIST.UPDATE_INSTITUTION IS 'Update Institution';
-- CHANGE END: Ana Matos

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 08/01/2016 12:01
-- CHANGE REASON: [ALERT-317702] 
COMMENT ON TABLE ANALYSIS_REQ_HIST IS 'Lab tests'' orders history table';
-- CHANGE END: Ana Matos

-- CHANGED BY: Diogo Oliveira
-- CHANGE DATE: 24/02/2021 14:36
-- CHANGE REASON: [EMR-42343] - Change the descriptions of the "Start date" and "Date to be defined" fields.
comment on column ANALYSIS_REQ_HIST.FLG_TIME is 'To be performed: E - this episode; B - before next episode; N - next episode; D - On a defined or to be defined date';
-- CHANGE END: Diogo Oliveira