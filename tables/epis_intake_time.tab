-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 08/02/2011 09:39
-- CHANGE REASON: [ALERT-157535] Intake
DECLARE
  e_name_already_exists EXCEPTION;

PRAGMA EXCEPTION_INIT(e_name_already_exists, -955);
BEGIN
EXECUTE IMMEDIATE 'CREATE TABLE EPIS_INTAKE_TIME
 (
 ID_EPISODE               NUMBER(24) NOT NULL,
 DT_REGISTER              TIMESTAMP WITH LOCAL TIME ZONE NOT NULL,
 ID_PATIENT               NUMBER(24) NOT NULL,
 ID_PROFESSIONAL          NUMBER(24) NOT NULL,
 DT_INTAKE_TIME           TIMESTAMP WITH LOCAL TIME ZONE NOT NULL,
 CREATE_USER              VARCHAR2(24 CHAR),
 CREATE_TIME              TIMESTAMP WITH LOCAL TIME ZONE,
 CREATE_INSTITUTION       NUMBER(24),
 UPDATE_USER              VARCHAR2(24 CHAR),
 UPDATE_TIME              TIMESTAMP WITH LOCAL TIME ZONE,
 UPDATE_INSTITUTION       NUMBER(24)
 )';
    EXCEPTION 
WHEN e_name_already_exists THEN
         dbms_output.put_line('EPIS_INTAKE_TIME already exists.');
END;
/

ALTER TABLE EPIS_INTAKE_TIME MOVE TABLESPACE TABLE_M;

COMMENT ON TABLE EPIS_INTAKE_TIME IS 'Intake time';
COMMENT ON COLUMN EPIS_INTAKE_TIME.ID_EPISODE IS 'Episode ID';
COMMENT ON COLUMN EPIS_INTAKE_TIME.DT_REGISTER IS 'Register time';
COMMENT ON COLUMN EPIS_INTAKE_TIME.ID_PATIENT IS 'Patient ID';
COMMENT ON COLUMN EPIS_INTAKE_TIME.ID_PROFESSIONAL IS 'Professional ID which created the record';
COMMENT ON COLUMN EPIS_INTAKE_TIME.DT_INTAKE_TIME IS 'Intake time';
COMMENT ON COLUMN EPIS_INTAKE_TIME.CREATE_USER is 'Professional ID which created the record';
COMMENT ON COLUMN EPIS_INTAKE_TIME.CREATE_TIME is 'Date of record creation';
COMMENT ON COLUMN EPIS_INTAKE_TIME.CREATE_INSTITUTION is 'Institution ID where record was created';
COMMENT ON COLUMN EPIS_INTAKE_TIME.UPDATE_USER is 'Professional ID who last updated the record';
COMMENT ON COLUMN EPIS_INTAKE_TIME.UPDATE_TIME is 'Date when record was last updated';
COMMENT ON COLUMN EPIS_INTAKE_TIME.UPDATE_INSTITUTION is 'Institution ID where record was last updated';
-- CHANGE END: Alexandre Santos