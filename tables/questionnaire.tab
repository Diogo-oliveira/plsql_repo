-- CHANGED BY: MARCO FREIRE
-- CHANGE DATE: 16/06/2010 16:00
-- CHANGE REASON: [ALERT-27380] 

CREATE TABLE QUESTIONNAIRE
   (ID_QUESTIONNAIRE NUMBER(24) NOT NULL ENABLE,
    DESC_QUESTIONNAIRE VARCHAR2(255 CHAR) NOT NULL ENABLE,
	DESC_VALUES VARCHAR2(500 CHAR) NOT NULL ENABLE,
	CODE_QUESTIONNAIRE VARCHAR2(32 CHAR) NOT NULL ENABLE,
	FLG_ACTIVE VARCHAR2(1 CHAR) NOT NULL ENABLE,
	ID_CONTENT VARCHAR2(200 CHAR),
	--
	CREATE_USER            VARCHAR2(24 CHAR),
    CREATE_TIME            TIMESTAMP(6) WITH LOCAL TIME ZONE,
    CREATE_INSTITUTION     NUMBER(24),
    UPDATE_USER            VARCHAR2(24 CHAR),
    UPDATE_TIME            TIMESTAMP(6) WITH LOCAL TIME ZONE,
    UPDATE_INSTITUTION     NUMBER(24)
   );

   
   COMMENT ON TABLE QUESTIONNAIRE IS 'Tabela de parametrização de questões por laboratório' ;

   COMMENT ON COLUMN QUESTIONNAIRE.ID_QUESTIONNAIRE IS 'Chave primária' ;
   COMMENT ON COLUMN QUESTIONNAIRE.DESC_QUESTIONNAIRE IS 'Questão' ;
   COMMENT ON COLUMN QUESTIONNAIRE.DESC_VALUES IS 'Possíveis respostas' ;
   COMMENT ON COLUMN QUESTIONNAIRE.CODE_QUESTIONNAIRE IS 'Abreviatura da descrição' ;
   COMMENT ON COLUMN QUESTIONNAIRE.FLG_ACTIVE IS 'Indicador de validade do registo' ;
   --
   COMMENT ON COLUMN QUESTIONNAIRE.create_user            IS 'Professional that created the questionnaire';
   COMMENT ON COLUMN QUESTIONNAIRE.create_time            IS 'Date of the questionnaire creation';
   COMMENT ON COLUMN QUESTIONNAIRE.create_institution     IS 'Id of the institution where the registry was created';
   COMMENT ON COLUMN QUESTIONNAIRE.update_user            IS 'Last professional that updated the questionnaire';
   COMMENT ON COLUMN QUESTIONNAIRE.update_time            IS 'Date of the last update to the questionnaire';  
   COMMENT ON COLUMN QUESTIONNAIRE.update_institution     IS 'Id of the last institution where the questionnaire was updated';
   COMMENT ON COLUMN QUESTIONNAIRE.id_content			  IS 'Identificador único de conteúdo';
 
-- CHANGED END: MARCO FREIRE 

-- CHANGED BY: Ana Matos
-- CHANGE DATE: 09/10/2013 09:41
-- CHANGE REASON: [ALERT-266573] 
ALTER TABLE QUESTIONNAIRE DROP COLUMN DESC_QUESTIONNAIRE;
ALTER TABLE QUESTIONNAIRE DROP COLUMN DESC_VALUES;

ALTER TABLE QUESTIONNAIRE 
 ADD (GENDER VARCHAR2(1 CHAR)
 ,AGE_MIN NUMBER(3)
 ,AGE_MAX NUMBER(3));

COMMENT ON TABLE QUESTIONNAIRE IS 'Table with the clinical questions';

COMMENT ON COLUMN QUESTIONNAIRE.ID_CONTENT IS 'Content unique ID';
COMMENT ON COLUMN QUESTIONNAIRE.GENDER IS 'Gender';
COMMENT ON COLUMN QUESTIONNAIRE.AGE_MIN IS 'Minimum age';
COMMENT ON COLUMN QUESTIONNAIRE.AGE_MAX IS 'Maximum age';
-- CHANGE END: Ana Matos