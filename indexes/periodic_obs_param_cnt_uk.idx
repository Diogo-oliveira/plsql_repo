-- CHANGED BY: Tércio Soares
-- CHANGE DATE: 06/11/2009 16:25
-- CHANGE REASON: [ALERT-54906] 
CREATE UNIQUE INDEX PERIODIC_OBS_PARAM_CNT_UK ON ALERT.PERIODIC_OBSERVATION_PARAM (CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
         THEN ID_CONTENT END,
CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
         THEN ID_EVENT END,
CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
         THEN ID_CLINICAL_SERVICE END,
CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
         THEN ID_INSTITUTION END,
CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
         THEN ID_SOFTWARE END,
                                                                        CASE WHEN ID_CONTENT IS NOT NULL AND nvl(FLG_AVAILABLE, 'Y') <> 'N'
   THEN FLG_AVAILABLE END);
-- CHANGE END: Tércio Soares