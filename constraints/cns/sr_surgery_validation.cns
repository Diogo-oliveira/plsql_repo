-- CHANGED BY: Gustavo Serrano
-- CHANGE DATE: 29/09/2009 16:21
-- CHANGE REASON: [ALERT-47078] Consulta de Pré-Operatório
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_PK PRIMARY KEY (INTERNAL_NAME, FLG_GROUP, ID_INSTITUTION, ID_SOFTWARE) ENABLE;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_ID_SURG_VAL_UK UNIQUE (ID_SURGERY_VALIDATION) ENABLE;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_AVAILABLE_CHK CHECK (FLG_AVAILABLE IN ('Y', 'N')) ENABLE;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_TYPE_CHK CHECK (FLG_TYPE IN ('E', 'V', 'EV', 'VE')) ENABLE;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_GROUP_CHK CHECK (FLG_GROUP IN ('AMB')) ENABLE;
-- CHANGE END: Gustavo Serrano

-- CHANGED BY: Gustavo Serrano
-- CHANGE DATE: 14/10/2009 17:47
-- CHANGE REASON: [ALERT-47078] ALERT-642 Minor changes
ALTER TABLE SR_SURGERY_VALIDATION DROP CONSTRAINT SSV_FLG_TYPE_CHK;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_TYPE_CHK CHECK (FLG_TYPE IN ('E', 'V', 'C', 'EV', 'EC', 'VC', 'EVC')) ENABLE;
-- CHANGE END: Gustavo Serrano

-- CHANGED BY: Filipe Silva
-- CHANGE DATE: 24/03/2010 16:36
-- CHANGE REASON: [ALERT-83187] 
ALTER TABLE SR_SURGERY_VALIDATION DROP CONSTRAINT SSV_FLG_TYPE_CHK;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_TYPE_CHK CHECK (FLG_TYPE IN ('E', 'V', 'C', 'EV', 'EC', 'VC', 'EVC', 'G')) ENABLE;

alter table SR_SURGERY_VALIDATION DROP CONSTRAINT SSV_FLG_GROUP_CHK;
ALTER TABLE SR_SURGERY_VALIDATION ADD CONSTRAINT SSV_FLG_GROUP_CHK CHECK (FLG_GROUP IN ('AMB', 'HOME_MEDICATION','PAST_HISTORY','SURGICAL_HISTORY')) ENABLE;

alter table sr_surgery_validation drop constraint SSV_PK; 
DROP INDEX SSV_PK;
alter table sr_surgery_validation add constraint SSV_PK PRIMARY KEY (INTERNAL_NAME, FLG_GROUP, ID_INSTITUTION, ID_SOFTWARE, ID_DOC_AREA) ENABLE;
-- CHANGE END: Filipe Silva