

  ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_TDISC_FK FOREIGN KEY (ID_TRIAGE_DISCRIMINATOR)
	  REFERENCES TRIAGE_DISCRIMINATOR (ID_TRIAGE_DISCRIMINATOR) ENABLE;

  ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_UNITM_FK FOREIGN KEY (ID_UNIT_MEASURE)
	  REFERENCES UNIT_MEASURE (ID_UNIT_MEASURE) ENABLE;

  ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_VSN_FK FOREIGN KEY (ID_VITAL_SIGN)
	  REFERENCES VITAL_SIGN (ID_VITAL_SIGN) ENABLE;




-- CHANGED BY: José Brito
-- CHANGE DATE: 24/01/2010 19:50
-- CHANGE REASON: [ALERT-70160] Triage refactoring
BEGIN
EXECUTE IMMEDIATE 'ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_TDVV_FK FOREIGN KEY (ID_PARENT) REFERENCES TRIAGE_DISC_VS_VALID ENABLE';
EXCEPTION
    WHEN OTHERS THEN
        dbms_output.put_line('WARNING: Object already exists.');
END;
/
BEGIN
EXECUTE IMMEDIATE 'ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_VS_R_FK FOREIGN KEY (ID_VITAL_SIGN_RELATED) REFERENCES VITAL_SIGN ENABLE';
EXCEPTION
    WHEN OTHERS THEN
        dbms_output.put_line('WARNING: Object already exists.');
END;
/
BEGIN
EXECUTE IMMEDIATE 'ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_VSD_R_FK FOREIGN KEY (ID_VITAL_SIGN_DESC_RELATED) REFERENCES VITAL_SIGN_DESC ENABLE';
EXCEPTION
    WHEN OTHERS THEN
        dbms_output.put_line('WARNING: Object already exists.');
END;
/
-- CHANGE END: José Brito

-- CHANGED BY: José Brito
-- CHANGE DATE: 09/04/2010 11:14
-- CHANGE REASON: [ALERT-87635] Manchester triage improvements - replication in 2.6
BEGIN
   EXECUTE IMMEDIATE 'ALTER TABLE TRIAGE_DISC_VS_VALID ADD CONSTRAINT TDVV_MRK_FK FOREIGN KEY (id_market) REFERENCES MARKET ENABLE';
EXCEPTION
   WHEN OTHERS THEN
      dbms_output.put_line('WARNING: Object already exists.');
END;
/
-- CHANGE END: José Brito

-- CHANGED BY: Alexandre Santos
-- CHANGE DATE: 28/06/2013 17:05
-- CHANGE REASON: [ALERT-260856] Ability to perform triage based on EST (Échelle Suisse de Tri) (ALERT_188926) - VERSIONING DB DDL
DECLARE
    PROCEDURE run_ddl(i_sql IN VARCHAR2) IS
    BEGIN
        EXECUTE IMMEDIATE i_sql;
    EXCEPTION
        WHEN OTHERS THEN
            dbms_output.put_line('WARNING - ' || replace(SRCSTR => SQLERRM, OLDSUB => 'ORA-', NEWSUB => '') || '; ' || i_sql || ';');
    END run_ddl;
BEGIN
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TRIAGE_DISC_VS_VALID_UNI CASCADE');
    
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_TDISC_FK');
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_TDVV_FK');
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_UNITM_FK');
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_VSD_R_FK');
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_VSN_FK');
    run_ddl(i_sql => 'ALTER TABLE TRIAGE_DISC_VS_VALID DROP CONSTRAINT TDVV_VS_R_FK');
END;
/
-- CHANGE END: Alexandre Santos